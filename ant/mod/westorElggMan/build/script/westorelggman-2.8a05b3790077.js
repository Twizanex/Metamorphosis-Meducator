qx.$$packageData['8a05b3790077']={"locales":{},"resources":{"qx/icon/Oxygen/16/actions/edit-clear.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-copy.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-cut.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-delete.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-find.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-paste.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-redo.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-select-all.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-undo.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-indent-less.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-indent-more.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-justify-center.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-justify-fill.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-justify-left.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-justify-right.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-text-bold.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-text-direction-ltr.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-text-direction-rtl.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-text-italic.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-text-strikethrough.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-text-underline.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/insert-image.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/insert-link.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/insert-text.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/view-fullscreen.png":[16,16,"png","qx"],"qx/static/blank.html":"qx","westorelggman/htmlarea/format-fill-color.png":[16,16,"png","westorelggman"],"westorelggman/htmlarea/format-list-ordered.png":[16,16,"png","westorelggman"],"westorelggman/htmlarea/format-list-unordered.png":[16,16,"png","westorelggman"],"westorelggman/htmlarea/format-text-color.png":[16,16,"png","westorelggman"],"westorelggman/htmlarea/insert-horizontal-rule.png":[16,16,"png","westorelggman"],"westorelggman/htmlarea/insert-table.png":[16,16,"png","westorelggman"],"westorelggman/htmlarea/insert-text.png":[16,16,"png","westorelggman"],"westorelggman/htmlarea/qooxdoo_logo.png":[136,41,"png","westorelggman"]},"translations":{"C":{},"en":{}}};

qx.Part.$$notifyLoad("8a05b3790077", function() {
(function(){var bw="brightness-handle",bv="hue-saturation-handle",bu="hsbSpinner",bt="rgbSpinner",bs="changeValue",br="hexField",bq="hueSaturationField",bp="brightness-field",bo="mousedown",bn="rgb-spinner-red",bc="preview-content-old",bb="rgb-spinner-green",ba="brightnessField",Y="hue-saturation-field",X="hsb-spinner-brightness",W="preview-content-new",V="hue-saturation-pane",U="rgb-spinner-blue",T="hsb-spinner-hue",S="hsb-spinner-saturation",bD="hex-field",bE="brightnessModifier",bB="blueModifier",bC="saturationModifier",bz="middle",bA="Number",bx="#",by="redModifier",bF="greenModifier",bG="hueModifier",bg="Integer",bf="brightness-pane",bi="control-pane",bh="preset-grid",bk="mouseup",bj="preset-field-set",bm="qx.event.type.Event",bl="mousemove",be="hex-field-composite",bd="rgb-spinner-composite",a="hsb-spinner-composite",b="control-bar",c="mousewheel",d="visual-pane",f="input-field-set",g="preview-field-set",h="black",k="_applyGreen",l="#333",m="aqua",bK="colorbucket",bJ="qx.event.type.Data",bI="Hex",bH="#BBB",bO="decoration/colorselector/brightness-handle.gif",bN="Visual",bM="_applySaturation",bL="Preview (Old/New)",bQ="FFFFFF",bP="decoration/colorselector/brightness-field.png",C="white",D="orange",A="_applyRed",B="_applyBlue",G="maroon",H="Presets",E="_applyBrightness",F="#999",y="purple",z="red",u="blue",t="_applyHue",w="decoration/colorselector/huesaturation-handle.gif",v="colorselector",q="qx.ui.control.ColorSelector",p="lime",s="#EEE",r="olive",o="RGB",n="decoration/colorselector/huesaturation-field.jpg",M="navy",N="teal",O="green",P="yellow",I="#666",J="fuchsia",K="Details",L="",Q="colorbucket#",R="appear",x="HSB";
qx.Class.define(q,{extend:qx.ui.core.Widget,implement:[qx.ui.form.IColorForm],construct:function(){qx.ui.core.Widget.call(this);
this._setLayout(new qx.ui.layout.VBox());
this._createChildControl(b);
this.addListener(R,this._onAppear,this);
},events:{"dialogok":bm,"dialogcancel":bm,"changeValue":bJ},properties:{appearance:{refine:true,init:v},red:{check:bg,init:255,apply:A},green:{check:bg,init:255,apply:k},blue:{check:bg,init:255,apply:B},hue:{check:bA,init:0,apply:t},saturation:{check:bA,init:0,apply:bM},brightness:{check:bA,init:100,apply:E}},members:{__xn:null,__xo:[G,z,D,P,r,y,J,p,O,M,u,m,N,h,l,I,F,bH,s,C],__xp:L,__xq:0,__xr:0,__xs:0,__xt:true,__xu:false,_createChildControlImpl:function(bR,bS){var bT;

switch(bR){case b:bT=new qx.ui.container.Composite(new qx.ui.layout.HBox(10));
bT.add(this.getChildControl(bi));
bT.add(this.getChildControl(d));
this._add(bT);
break;
case d:bT=new qx.ui.groupbox.GroupBox(this.tr(bN));
bT.setLayout(new qx.ui.layout.HBox(10));
bT.add(this.getChildControl(V));
bT.add(this.getChildControl(bf));
break;
case bi:bT=new qx.ui.container.Composite(new qx.ui.layout.VBox(12));
bT.add(this.getChildControl(bj));
bT.add(this.getChildControl(f));
bT.add(this.getChildControl(g),{flex:1});
break;
case V:bT=new qx.ui.container.Composite(new qx.ui.layout.Canvas());
bT.setAllowGrowY(false);
bT.addListener(c,this._onHueSaturationPaneMouseWheel,this);
bT.add(this.getChildControl(Y));
bT.add(this.getChildControl(bv),{left:0,top:256});
break;
case Y:bT=new qx.ui.basic.Image(n);
bT.addListener(bo,this._onHueSaturationFieldMouseDown,this);
break;
case bv:bT=new qx.ui.basic.Image(w);
bT.addListener(bo,this._onHueSaturationFieldMouseDown,this);
bT.addListener(bk,this._onHueSaturationHandleMouseUp,this);
bT.addListener(bl,this._onHueSaturationHandleMouseMove,this);
break;
case bf:bT=new qx.ui.container.Composite(new qx.ui.layout.Canvas());
bT.setAllowGrowY(false);
bT.addListener(c,this._onBrightnessPaneMouseWheel,this);
bT.add(this.getChildControl(bp));
bT.add(this.getChildControl(bw));
break;
case bp:bT=new qx.ui.basic.Image(bP);
bT.addListener(bo,this._onBrightnessFieldMouseDown,this);
break;
case bw:bT=new qx.ui.basic.Image(bO);
bT.addListener(bo,this._onBrightnessHandleMouseDown,this);
bT.addListener(bk,this._onBrightnessHandleMouseUp,this);
bT.addListener(bl,this._onBrightnessHandleMouseMove,this);
break;
case bj:bT=new qx.ui.groupbox.GroupBox(this.tr(H));
bT.setLayout(new qx.ui.layout.Grow());
bT.add(this.getChildControl(bh));
break;
case bK:bT=new qx.ui.core.Widget();
bT.addListener(bo,this._onColorFieldClick,this);
break;
case bh:bY=new qx.ui.layout.Grid(3,3);
bT=new qx.ui.container.Composite(bY);
var ca;
var bX;

for(var i=0;i<2;i++){for(var j=0;j<10;j++){bX=i*10+j;
ca=this.getChildControl(Q+bX);
ca.setBackgroundColor(this.__xo[bX]);
bT.add(ca,{column:j,row:i});
}}break;
case f:bT=new qx.ui.groupbox.GroupBox(this.tr(K));
var bY=new qx.ui.layout.VBox();
bY.setSpacing(10);
bT.setLayout(bY);
bT.add(this.getChildControl(be));
bT.add(this.getChildControl(bd));
bT.add(this.getChildControl(a));
break;
case g:bT=new qx.ui.groupbox.GroupBox(this.tr(bL));
var bY=new qx.ui.layout.HBox(10);
bT.setLayout(bY);
bT.add(this.getChildControl(bc),{flex:1});
bT.add(this.getChildControl(W),{flex:1});
break;
case be:var bW=new qx.ui.layout.HBox(4);
bW.setAlignY(bz);
bT=new qx.ui.container.Composite(bW);
var cc=new qx.ui.basic.Label(this.tr(bI));
bT.add(cc);
var cb=new qx.ui.basic.Label(bx);
bT.add(cb);
bT.add(this.getChildControl(bD));
break;
case bD:bT=new qx.ui.form.TextField(bQ);
bT.setMaxLength(6);
bT.setFilter(/[0-9A-Fa-f]/);
bT.setWidth(55);
bT.addListener(bs,this._onHexFieldChange,this);
break;
case bd:var bW=new qx.ui.layout.HBox(4);
bW.setAlignY(bz);
bT=new qx.ui.container.Composite(bW);
var bU=new qx.ui.basic.Label(this.tr(o));
bU.setWidth(25);
bT.add(bU);
bT.add(this.getChildControl(bn));
bT.add(this.getChildControl(bb));
bT.add(this.getChildControl(U));
break;
case bn:bT=new qx.ui.form.Spinner(0,255,255);
bT.setWidth(50);
bT.addListener(bs,this._setRedFromSpinner,this);
break;
case bb:bT=new qx.ui.form.Spinner(0,255,255);
bT.setWidth(50);
bT.addListener(bs,this._setGreenFromSpinner,this);
break;
case U:bT=new qx.ui.form.Spinner(0,255,255);
bT.setWidth(50);
bT.addListener(bs,this._setBlueFromSpinner,this);
break;
case a:var bW=new qx.ui.layout.HBox(4);
bW.setAlignY(bz);
bT=new qx.ui.container.Composite(bW);
var bV=new qx.ui.basic.Label(this.tr(x));
bV.setWidth(25);
bT.add(bV);
bT.add(this.getChildControl(T));
bT.add(this.getChildControl(S));
bT.add(this.getChildControl(X));
break;
case T:bT=new qx.ui.form.Spinner(0,0,360);
bT.setWidth(50);
bT.addListener(bs,this._setHueFromSpinner,this);
break;
case S:bT=new qx.ui.form.Spinner(0,0,100);
bT.setWidth(50);
bT.addListener(bs,this._setSaturationFromSpinner,this);
break;
case X:bT=new qx.ui.form.Spinner(0,100,100);
bT.setWidth(50);
bT.addListener(bs,this._setBrightnessFromSpinner,this);
break;
case bc:bT=new qx.ui.core.Widget();
break;
case W:bT=new qx.ui.core.Widget();
break;
}return bT||qx.ui.core.Widget.prototype._createChildControlImpl.call(this,bR);
},setValue:function(cd){var ce;

if(cd==null){this.__xt=true;
ce=[255,255,255];
}else{ce=qx.util.ColorUtil.stringToRgb(cd);
this.__xt=false;
}this.__xu=true;
this.setRed(ce[0]);
this.setGreen(ce[1]);
this.__xu=false;
this.setBlue(ce[2]);
},getValue:function(){return this.__xt?null:bx+qx.util.ColorUtil.rgbToHexString([this.getRed(),this.getGreen(),this.getBlue()]);
},resetValue:function(){this.__xt=true;
this.__xu=true;
this.setRed(255);
this.setGreen(255);
this.__xu=false;
this.setBlue(255);
},__xv:function(){if(!this.__xu){this.__xt=false;
this.fireDataEvent(bs,this.getValue());
}},_applyRed:function(cf,cg){if(this.__xn===null){this.__xn=by;
}
if(this.__xn!==bt){this.getChildControl(bn).setValue(cf);
}
if(this.__xn!==br){this._setHexFromRgb();
}
switch(this.__xn){case bt:case br:case by:this._setHueFromRgb();
}this._setPreviewFromRgb();
this.__xv();

if(this.__xn===by){this.__xn=null;
}},_applyGreen:function(ch,ci){if(this.__xn===null){this.__xn=bF;
}
if(this.__xn!==bt){this.getChildControl(bb).setValue(ch);
}
if(this.__xn!==br){this._setHexFromRgb();
}
switch(this.__xn){case bt:case br:case bF:this._setHueFromRgb();
}this._setPreviewFromRgb();
this.__xv();

if(this.__xn===bF){this.__xn=null;
}},_applyBlue:function(cj,ck){if(this.__xn===null){this.__xn=bB;
}
if(this.__xn!==bt){this.getChildControl(U).setValue(cj);
}
if(this.__xn!==br){this._setHexFromRgb();
}
switch(this.__xn){case bt:case br:case bB:this._setHueFromRgb();
}this._setPreviewFromRgb();
this.__xv();

if(this.__xn===bB){this.__xn=null;
}},_applyHue:function(cl,cm){if(this.__xn===null){this.__xn=bG;
}
if(this.__xn!==bu){this.getChildControl(T).setValue(cl);
}
if(this.__xn!==bq){if(this.getChildControl(bv).getBounds()){this.getChildControl(bv).setDomLeft(Math.round(cl/1.40625)+this.getChildControl(V).getPaddingLeft());
}else{this.getChildControl(bv).setLayoutProperties({left:Math.round(cl/1.40625)});
}}
switch(this.__xn){case bu:case bq:case bG:this._setRgbFromHue();
}this._setBrightnessGradiant();

if(this.__xn===bG){this.__xn=null;
}},_applySaturation:function(cn,co){if(this.__xn===null){this.__xn=bC;
}
if(this.__xn!==bu){this.getChildControl(S).setValue(cn);
}
if(this.__xn!==bq){this._setBrightnessGradiant();

if(this.getChildControl(bv).getBounds()){this.getChildControl(bv).setDomTop(256-Math.round(cn*2.56)+this.getChildControl(V).getPaddingTop());
}else{this.getChildControl(bv).setLayoutProperties({top:256-Math.round(cn*2.56)});
}}
switch(this.__xn){case bu:case bq:case bC:this._setRgbFromHue();
}
if(this.__xn===bC){this.__xn=null;
}},_applyBrightness:function(cp,cq){if(this.__xn===null){this.__xn=bE;
}
if(this.__xn!==bu){this.getChildControl(X).setValue(cp);
}
if(this.__xn!==ba){var cr=256-Math.round(cp*2.56);

if(this.getChildControl(bw).getBounds()){this.getChildControl(bw).setDomTop(cr+this.getChildControl(bf).getPaddingTop());
}else{this.getChildControl(bw).setLayoutProperties({top:cr});
}}
switch(this.__xn){case bu:case ba:case bE:this._setRgbFromHue();
}
if(this.__xn===bE){this.__xn=null;
}},_onBrightnessHandleMouseDown:function(e){this.getChildControl(bw).capture();
this.__xp=bw;
var cu=this.getChildControl(bp).getContainerLocation();
var ct=this.getChildControl(bw).getContainerLocation();
var cs=this.getChildControl(bp).getBounds();
this.__xq=cu.top+(e.getDocumentTop()-ct.top)-cs.top;
e.stopPropagation();
},_onBrightnessHandleMouseUp:function(e){this.getChildControl(bw).releaseCapture();
this.__xp=null;
},_onBrightnessHandleMouseMove:function(e){if(this.__xp===bw){this._setBrightnessOnFieldEvent(e);
e.stopPropagation();
}},_onBrightnessFieldMouseDown:function(e){var location=this.getChildControl(bp).getContainerLocation();
var cv=this.getChildControl(bw).getBounds();
this.__xq=location.top+(cv.height/2);
this._setBrightnessOnFieldEvent(e);
this.getChildControl(bw).capture();
this.__xp=bw;
},_onBrightnessPaneMouseWheel:function(e){this.setBrightness(qx.lang.Number.limit(this.getBrightness()+e.getWheelDelta(),0,100));
e.stop();
},_setBrightnessOnFieldEvent:function(e){var cw=qx.lang.Number.limit(e.getDocumentTop()-this.__xq,0,256);
this.__xn=ba;

if(this.getChildControl(bw).getBounds()){this.getChildControl(bw).setDomTop(cw);
}else{this.getChildControl(bw).setLayoutProperties({top:cw});
}this.setBrightness(100-Math.round(cw/2.56));
this.__xn=null;
},_onHueSaturationHandleMouseUp:function(e){if(this.__xp){e.stopPropagation();
this.getChildControl(bv).releaseCapture();
this.__xp=null;
}},_onHueSaturationHandleMouseMove:function(e){if(this.__xp===bv){this._setHueSaturationOnFieldEvent(e);
e.stopPropagation();
}},_onHueSaturationFieldMouseDown:function(e){var location=this.getChildControl(Y).getContainerLocation();
var cx=this.getChildControl(bv).getBounds();
var cy=this.getChildControl(Y).getBounds();
this.__xr=location.top+(cx.height/2)-cy.top;
this.__xs=location.left+(cx.width/2)-cy.left;
this._setHueSaturationOnFieldEvent(e);
this.getChildControl(bv).capture();
this.__xp=bv;
},_onHueSaturationPaneMouseWheel:function(e){this.setSaturation(qx.lang.Number.limit(this.getSaturation()+e.getWheelDelta(),0,100));
e.stop();
},_setHueSaturationOnFieldEvent:function(e){var cA=qx.lang.Number.limit(e.getDocumentTop()-this.__xr,0,256);
var cz=qx.lang.Number.limit(e.getDocumentLeft()-this.__xs,0,256);
this.getChildControl(bv).setDomPosition(cz,cA);
this.__xn=bq;
this.setSaturation(100-Math.round(cA/2.56));
this.setHue(Math.round(cz*1.40625));
this.__xn=null;
},_setRedFromSpinner:function(){if(this.__xn!==null){return;
}this.__xn=bt;
this.setRed(this.getChildControl(bn).getValue());
this.__xn=null;
},_setGreenFromSpinner:function(){if(this.__xn!==null){return;
}this.__xn=bt;
this.setGreen(this.getChildControl(bb).getValue());
this.__xn=null;
},_setBlueFromSpinner:function(){if(this.__xn!==null){return;
}this.__xn=bt;
this.setBlue(this.getChildControl(U).getValue());
this.__xn=null;
},_setHueFromSpinner:function(){if(this.__xn!==null){return;
}this.__xn=bu;
this.setHue(this.getChildControl(T).getValue());
this.__xn=null;
},_setSaturationFromSpinner:function(){if(this.__xn!==null){return;
}this.__xn=bu;
this.setSaturation(this.getChildControl(S).getValue());
this.__xn=null;
},_setBrightnessFromSpinner:function(){if(this.__xn!==null){return;
}this.__xn=bu;
this.setBrightness(this.getChildControl(X).getValue());
this.__xn=null;
},_onHexFieldChange:function(e){if(this.__xn!==null){return;
}
try{var cC=this.getChildControl(bD);
var cB=qx.util.ColorUtil.hexStringToRgb(bx+cC.getValue());
}catch(cD){return;
}this.__xn=br;
this.setRed(cB[0]);
this.setGreen(cB[1]);
this.setBlue(cB[2]);
this.__xn=null;
},_setHexFromRgb:function(){var cE=qx.util.ColorUtil.rgbToHexString([this.getRed(),this.getGreen(),this.getBlue()]);
this.getChildControl(bD).setValue(cE);
},_onColorFieldClick:function(e){var cF=e.getTarget().getBackgroundColor();

if(!cF){return this.error("Missing backgroundColor value for field: "+e.getTarget());
}var cG=qx.util.ColorUtil.stringToRgb(cF);
this.setRed(cG[0]);
this.setGreen(cG[1]);
this.setBlue(cG[2]);
},_setHueFromRgb:function(){switch(this.__xn){case bu:case bq:case ba:break;
default:var cH=qx.util.ColorUtil.rgbToHsb([this.getRed(),this.getGreen(),this.getBlue()]);
this.setHue(cH[0]);
this.setSaturation(cH[1]);
this.setBrightness(cH[2]);
}},_setRgbFromHue:function(){switch(this.__xn){case bt:case br:break;
default:var cI=qx.util.ColorUtil.hsbToRgb([this.getHue(),this.getSaturation(),this.getBrightness()]);
this.setRed(cI[0]);
this.setGreen(cI[1]);
this.setBlue(cI[2]);
}},_setPreviewFromRgb:function(){var cJ=qx.util.ColorUtil.rgbToRgbString([this.getRed(),this.getGreen(),this.getBlue()]);
this.getChildControl(W).setBackgroundColor(cJ);
},setPreviousColor:function(cK,cL,cM){var cN=qx.util.ColorUtil.rgbToRgbString([cK,cL,cM]);
this.getChildControl(bc).setBackgroundColor(cN);
this.setRed(cK);
this.setGreen(cL);
this.setBlue(cM);
},_setBrightnessGradiant:function(){var cO=qx.util.ColorUtil;
var cP=cO.hsbToRgb([this.getHue(),this.getSaturation(),255]);
var cQ=cO.rgbToRgbString(cP);
this.getChildControl(bp).setBackgroundColor(cQ);
},_onAppear:function(e){var cR=qx.util.ColorUtil.rgbToRgbString([this.getRed(),this.getGreen(),this.getBlue()]);
this.getChildControl(bc).setBackgroundColor(cR);
this.getChildControl(W).setBackgroundColor(cR);
}}});
})();
(function(){var k="textfield",j="button",i="list",h="changeValue",g="selected",f="inner",d="focusin",c="popup",b="focusout",a="blur",w="Enter",v="key",u="Down",t="qx.event.type.Data",s="visible",r="quick",q="String",p="qx.ui.form.ComboBox",o="single",n="combobox",l="click",m="_applyPlaceholder";
qx.Class.define(p,{extend:qx.ui.form.AbstractSelectBox,implement:[qx.ui.form.IStringForm],construct:function(){qx.ui.form.AbstractSelectBox.call(this);
var x=this._createChildControl(k);
this._createChildControl(j);
this.addListener(l,this._onClick);
this.addListener(d,function(e){x.fireNonBubblingEvent(d,qx.event.type.Focus);
},this);
this.addListener(b,function(e){x.fireNonBubblingEvent(b,qx.event.type.Focus);
},this);
},properties:{appearance:{refine:true,init:n},placeholder:{check:q,nullable:true,apply:m}},events:{"changeValue":t},members:{__xw:null,__xx:null,_applyPlaceholder:function(y,z){this.getChildControl(k).setPlaceholder(y);
},_createChildControlImpl:function(A,B){var C;

switch(A){case k:C=new qx.ui.form.TextField();
C.setFocusable(false);
C.addState(f);
C.addListener(h,this._onTextFieldChangeValue,this);
C.addListener(a,this.close,this);
this._add(C,{flex:1});
break;
case j:C=new qx.ui.form.Button();
C.setFocusable(false);
C.setKeepActive(true);
C.addState(f);
this._add(C);
break;
case i:C=qx.ui.form.AbstractSelectBox.prototype._createChildControlImpl.call(this,A);
C.setSelectionMode(o);
break;
}return C||qx.ui.form.AbstractSelectBox.prototype._createChildControlImpl.call(this,A);
},_forwardStates:{focused:true,invalid:true},tabFocus:function(){var D=this.getChildControl(k);
D.getFocusElement().focus();
D.selectAllText();
},focus:function(){qx.ui.form.AbstractSelectBox.prototype.focus.call(this);
this.getChildControl(k).getFocusElement().focus();
},setValue:function(E){var F=this.getChildControl(k);

if(F.getValue()==E){return;
}F.setValue(E);
},getValue:function(){return this.getChildControl(k).getValue();
},resetValue:function(){this.getChildControl(k).setValue(null);
},_onKeyPress:function(e){var H=this.getChildControl(c);
var G=e.getKeyIdentifier();

if(G==u&&e.isAltPressed()){this.getChildControl(j).addState(g);
this.toggle();
e.stopPropagation();
}else if(G==w){if(H.isVisible()){this._setPreselectedItem();
this.resetAllTextSelection();
this.close();
e.stop();
}}else if(H.isVisible()){qx.ui.form.AbstractSelectBox.prototype._onKeyPress.call(this,e);
}},_onClick:function(e){var I=e.getTarget();

if(I==this.getChildControl(j)){this.toggle();
}else{this.close();
}},_onListMouseDown:function(e){this._setPreselectedItem();
},_setPreselectedItem:function(){if(this.__xw){var J=this.__xw.getLabel();

if(this.getFormat()!=null){J=this.getFormat().call(this,this.__xw);
}if(J&&J.translate){J=J.translate();
}this.setValue(J);
this.__xw=null;
}},_onListChangeSelection:function(e){var K=e.getData();

if(K.length>0){var M=this.getChildControl(i);
var L=M.getSelectionContext();

if(L==r||L==v){this.__xw=K[0];
}else{var N=K[0].getLabel();

if(this.getFormat()!=null){N=this.getFormat().call(this,K[0]);
}if(N&&N.translate){N=N.translate();
}this.setValue(N);
this.__xw=null;
}}},_onPopupChangeVisibility:function(e){var P=this.getChildControl(c);

if(P.isVisible()){var Q=this.getChildControl(i);
var R=this.getValue();
var O=null;

if(R){O=Q.findItem(R);
}
if(O){Q.setSelection([O]);
}else{Q.resetSelection();
}}else{if(e.getOldData()==s){this.tabFocus();
}}this.getChildControl(j).removeState(g);
},_onTextFieldChangeValue:function(e){var U=e.getData();
var T=this.getChildControl(i);

if(U!=null){var S=T.findItem(U,false);

if(S){T.setSelection([S]);
}else{T.resetSelection();
}}else{T.resetSelection();
}this.fireDataEvent(h,U,e.getOldData());
},getTextSelection:function(){return this.getChildControl(k).getTextSelection();
},getTextSelectionLength:function(){return this.getChildControl(k).getTextSelectionLength();
},setTextSelection:function(V,W){this.getChildControl(k).setTextSelection(V,W);
},clearTextSelection:function(){this.getChildControl(k).clearTextSelection();
},selectAllText:function(){this.getChildControl(k).selectAllText();
},resetAllTextSelection:function(){this.clearTextSelection();
this.selectAllText();
}}});
})();
(function(){var k="qx.event.type.Data",j="Boolean",i="qx.event.type.Event",h="mousedown",g="String",f="none",d="engine.name",c="appear",b="mouseup",a="losecapture",bh="display",bg="xhtml",bf="_applyUseUndoRedo",be="focusOut",bd="_applyMessengerMode",bc="url(",bb=")",ba="InsertParagraphOnLinebreak",Y="gecko",X="repeat",r="undoRedoState",s="div",p="messengerContent",q="Integer",n="NativeContextMenu",o="focused",l="Function",m="Please use the method 'qx.dom.Node.isBlockNode' instead.",v="_applyInsertParagraphOnLinebreak",w="PostProcess",E="_applyInsertLinebreakOnCtrlEnter",C="ContentType",M="px",H="set",T="DOMNodeRemoved",R="DefaultFontSize",y="cursorContext",W="htmlarea",V="ready",U="loadingError",x="MessengerMode",A="_applyDefaultFontSize",B="UseUndoRedo",D="__xA",F="_applyDefaultFontFamily",I="_applyContentType",O="qx.ui.embed.HtmlArea",S="mshtml",t="Verdana",u="block",z="DefaultFontFamily",L="contextmenu",K="readyAfterInvalid",J="__xB",Q="InsertLinebreakOnCtrlEnter",P="qx/static/blank.gif",G="_applyPostProcess",N="absolute";
qx.Class.define(O,{extend:qx.ui.core.Widget,construct:function(bi,bj,bk){this.__xy={};
qx.ui.core.Widget.call(this);
this._setLayout(new qx.ui.layout.Grow);
this.__xC();
this.__xz={content:bi,styleInfo:bj,source:bk};
qx.event.Registration.addListener(document.body,h,this.block,this,true);
qx.event.Registration.addListener(document.body,b,this.release,this,true);
qx.event.Registration.addListener(document.body,a,this.release,this,true);
},events:{"loadingError":k,"messengerContent":k,"cursorContext":k,"ready":i,"readyAfterInvalid":i,"focused":i,"focusOut":i,"contextmenu":k,"undoRedoState":k},statics:{isBlockNode:function(bl){var bm=qx.ui.embed.HtmlArea.isBlockNode;
var bn=m;
qx.log.Logger.deprecatedMethodWarning(bm,bn);
return qx.dom.Node.isBlockNode(bl);
},isParagraphParent:function(bo){return qx.bom.htmlarea.HtmlArea.isParagraphParent(bo);
}},properties:{contentType:{check:g,init:bg,apply:I},messengerMode:{check:j,init:false,apply:bd},insertParagraphOnLinebreak:{check:j,init:true,apply:v},insertLinebreakOnCtrlEnter:{check:j,init:true,apply:E},postProcess:{check:l,nullable:true,init:null,apply:G},useUndoRedo:{check:j,init:true,apply:bf},appearance:{refine:true,init:W},defaultFontFamily:{check:g,init:t,apply:F},defaultFontSize:{check:q,init:4,apply:A},focusable:{refine:true,init:true}},members:{__xA:null,__xy:null,__xB:null,__xz:null,_initBlockerElement:function(){if(!this.__xB){this.__xB=this._createBlockerElement();
}},_applyContentType:function(bp,bq){if(this.__xA!=null){this.__xA.setContentType(bp);
}else{this.__xy[C]=bp;
}},_applyMessengerMode:function(br,bs){if(this.__xA!=null){this.__xA.setMessengerMode(br);
}else{this.__xy[x]=br;
}},_applyInsertParagraphOnLinebreak:function(bt,bu){if(this.__xA!=null){this.__xA.setInsertParagraphOnLinebreak(bt);
}else{this.__xy[ba]=bt;
}},_applyInsertLinebreakOnCtrlEnter:function(bv,bw){if(this.__xA!=null){this.__xA.setInsertLinebreakOnCtrlEnter(bv);
}else{this.__xy[Q]=bv;
}},_applyPostProcess:function(bx,by){if(this.__xA!=null){this.__xA.setPostProcess(bx);
}else{this.__xy[w]=bx;
}},_applyUseUndoRedo:function(bz,bA){if(this.__xA!=null){this.__xA.setUseUndoRedo(bz);
}else{this.__xy[B]=bz;
}},_applyDefaultFontFamily:function(bB,bC){if(this.__xA!=null){this.__xA.setDefaultFontFamily(bB);
}else{this.__xy[z]=bB;
}},_applyDefaultFontSize:function(bD,bE){if(this.__xA!=null){this.__xA.setDefaultFontSize(bD);
}else{this.__xy[R]=bD;
}},_applyNativeContextMenu:function(bF,bG){if(this.__xA!=null){this.__xA.setNativeContextMenu(bF);
}else{this.__xy[n]=bF;
}},_createBlockerElement:function(){var bH=new qx.html.Element(s);
bH.setStyles({zIndex:20,position:N,display:f});
if((qx.core.Environment.get(d)==S)){bH.setStyles({backgroundImage:bc+qx.util.ResourceManager.getInstance().toUri(P)+bb,backgroundRepeat:X});
}return bH;
},__xC:function(){this.addListenerOnce(c,this.__xD);
},__xD:function(){var bI=this.getContentElement().getDomElement();
this.__xA=new qx.bom.htmlarea.HtmlArea(bI,this.__xz.content,this.__xz.styleInfo,this.__xz.source);
this.__xE();
this.__xF();

if((qx.core.Environment.get(d)==Y)){this.__xI();
}this.addListener(c,this.forceEditable);
},__xE:function(){for(var bJ in this.__xy){this.__xA[H+bJ](this.__xy[bJ]);
}},__xF:function(){this.__xA.addListener(V,this.__xG,this);
this.__xA.addListener(K,this.__xG,this);
this.__xA.addListener(o,this.__xG,this);
this.__xA.addListener(be,this.__xG,this);
this.__xA.addListener(U,this.__xH,this);
this.__xA.addListener(y,this.__xH,this);
this.__xA.addListener(L,this.__xH,this);
this.__xA.addListener(r,this.__xH,this);
this.__xA.addListener(p,this.__xH,this);
},__xG:function(e){var bK=e.clone();
this.fireEvent(bK.getType());
},__xH:function(e){var bL=e.clone();
this.fireDataEvent(bL.getType(),e.getData());
},__xI:function(){var bO=this.getContainerElement().getDomElement();
var bM=function(e){this.__xA.invalidateEditor();
};
var bN=qx.lang.Function.bind(bM,this);
qx.bom.Event.addNativeListener(bO,T,qx.event.GlobalError.observeMethod(bN));
},renderLayout:function(bP,top,bQ,bR){qx.ui.core.Widget.prototype.renderLayout.call(this,bP,top,bQ,bR);
var bT=M;
var bS=this.getInsets();

if(!this.__xB){this._initBlockerElement();
}this.__xB.setStyles({left:bS.left+bT,top:bS.top+bT,width:(bQ-bS.left-bS.right)+bT,height:(bR-bS.top-bS.bottom)+bT});
},getIframeObject:function(){return this.__xA!=null?this.__xA.getIframeObject():null;
},getCommandManager:function(){return this.__xA!=null?this.__xA.getCommandManager():null;
},setValue:function(bU){if(this.__xA!=null){this.__xA.setValue(bU);
}else{this.__xz.content=bU;
}},getValue:function(){if(this.__xA!=null){return this.__xA.getValue();
}else{return this.__xz.content;
}},getComputedValue:function(bV){return this.__xA!=null?this.__xA.getHtml(bV):null;
},getCompleteHtml:function(){return this.__xA!=null?this.__xA.getCompleteHtml():null;
},getContentDocument:function(){return this.__xA!=null?this.__xA.getContentDocument():null;
},getContentBody:function(){return this.__xA!=null?this.__xA.getContentBody():null;
},getContentWindow:function(){return this.__xA!=null?this.__xA.getContentWindow():null;
},getWords:function(bW){return this.__xA!=null?this.__xA.getWords(bW):null;
},getWordsWithElement:function(){return this.__xA!=null?this.__xA.getWordsWithElement():null;
},getTextNodes:function(){return this.__xA!=null?this.__xA.getTextNodes():null;
},isReady:function(){return this.__xA!=null?this.__xA.isReady():false;
},forceEditable:function(){if(this.__xA!=null){this.__xA.forceEditable();
}},isLoaded:function(){return this.__xA!=null?this.__xA.isLoaded():false;
},setEditable:function(bX){if(this.__xA!=null){this.__xA.setEditable(bX);
}},getEditable:function(){return this.__xA!=null?this.__xA.getEditable():false;
},isEditable:function(){return this.__xA!=null?this.__xA.isEditable():false;
},insertHtml:function(bY){return this.__xA!=null?this.__xA.insertHtml(bY):false;
},removeFormat:function(){return this.__xA!=null?this.__xA.removeFormat():false;
},setBold:function(){return this.__xA!=null?this.__xA.setBold():false;
},setItalic:function(){return this.__xA!=null?this.__xA.setItalic():false;
},setUnderline:function(){return this.__xA!=null?this.__xA.setUnderline():false;
},setStrikeThrough:function(){return this.__xA!=null?this.__xA.setStrikeThrough():false;
},setFontSize:function(ca){return this.__xA!=null?this.__xA.setFontSize(ca):false;
},setFontFamily:function(cb){return this.__xA!=null?this.__xA.setFontFamily(cb):false;
},setTextColor:function(cc){return this.__xA!=null?this.__xA.setTextColor(cc):false;
},setTextBackgroundColor:function(cd){return this.__xA!=null?this.__xA.setTextBackgroundColor(cd):false;
},setJustifyLeft:function(){return this.__xA!=null?this.__xA.setJustifyLeft():false;
},setJustifyCenter:function(){return this.__xA!=null?this.__xA.setJustifyCenter():false;
},setJustifyRight:function(){return this.__xA!=null?this.__xA.setJustifyRight():false;
},setJustifyFull:function(){return this.__xA!=null?this.__xA.setJustifyFull():false;
},insertIndent:function(){return this.__xA!=null?this.__xA.insertIndent():false;
},insertOutdent:function(){return this.__xA!=null?this.__xA.insertOutdent():false;
},insertOrderedList:function(){return this.__xA!=null?this.__xA.insertOrderedList():false;
},insertUnorderedList:function(){return this.__xA!=null?this.__xA.insertUnorderedList():false;
},insertHorizontalRuler:function(){return this.__xA!=null?this.__xA.insertHorizontalRuler():false;
},insertImage:function(ce){return this.__xA!=null?this.__xA.insertImage(ce):false;
},insertHyperLink:function(cf){return this.__xA!=null?this.__xA.insertHyperLink(cf):false;
},removeBackgroundColor:function(){return this.__xA!=null?this.__xA.removeBackgroundColor():false;
},setBackgroundColor:function(cg){return this.__xA!=null?this.__xA.setBackgroundColor(cg):false;
},removeBackgroundImage:function(){return this.__xA!=null?this.__xA.removeBackgroundImage():false;
},setBackgroundImage:function(ch,ci,cj){return this.__xA!=null?this.__xA.setBackgroundImage(ch,ci,cj):false;
},selectAll:function(){return this.__xA!=null?this.__xA.selectAll():false;
},undo:function(){return this.__xA!=null?this.__xA.undo():false;
},redo:function(){return this.__xA!=null?this.__xA.redo():false;
},resetHtml:function(){if(this.__xA!=null){this.__xA.resetHtml();
}},getHtml:function(ck){return this.__xA!=null?this.__xA.getHtml(ck):null;
},containsOnlyPlaceholder:function(){return this.__xA!=null?this.__xA.containsOnlyPlaceHolder():false;
},getContextInformation:function(){return this.__xA!=null?this.__xA.getContextInformation():null;
},getSelection:function(){return this.__xA!=null?this.__xA.getSelection():null;
},getSelectedText:function(){return this.__xA!=null?this.__xA.getSelectedText():null;
},getSelectedHtml:function(){return this.__xA!=null?this.__xA.getSelectedHtml():null;
},clearSelection:function(){if(this.__xA!=null){this.__xA.clearSelection();
}},getRange:function(){return this.__xA.getRange();
},saveRange:function(){this.__xA.saveRange();
},getSavedRange:function(){return this.__xA.getSavedRange();
},resetSavedRange:function(){this.__xA.resetSavedRange();
},getFocusNode:function(){return this.__xA!=null?this.__xA.getFocusNode():null;
},block:function(){if(!this.__xB){this._initBlockerElement();
}
if(!this.getContainerElement().hasChild(this.__xB)){this.getContainerElement().add(this.__xB);
}this.__xB.setStyle(bh,u);
},release:function(){if(this.__xB){this.__xB.setStyle(bh,f);
}},focus:function(){qx.ui.core.Widget.prototype.focus.call(this);
this.__xJ();
},tabFocus:function(){qx.ui.core.Widget.prototype.tabFocus.call(this);
this.__xJ();
},__xJ:function(){if(this.__xA!=null){qx.event.Timer.once(function(){this.__xA.focusContent();
},this,0);
}}},destruct:function(){this.__xy=this.__xz=null;
qx.event.Registration.removeListener(document.body,h,this.block,this,true);
qx.event.Registration.removeListener(document.body,b,this.release,this,true);
qx.event.Registration.removeListener(document.body,a,this.release,this,true);
this._disposeObjects(J,D);
}});
})();
(function(){var m="current-preview",l="execute",k="selected-preview",h="Number",g="preview-pane",f="selector-button",d="colorselector-cancelbutton",c="auto-button",b="colorselector-okbutton",a="__xN",X="mousedown",W="teal",V="maroon",U="qx.ui.control.ColorPopup",T="#666",S="changeValue",R="#333",Q="#000",P="yellow",O="changeGreen",t="colorpopup",u="_applyValue",r="blue",s="changeRed",p="field#",q="#CCC",n="Color Selector",o="changeVisibility",v="recent",w="changeBlue",D="mouseover",B="Cancel",H="#FFF",F="right",K="Open ColorSelector",J="mouseout",y="#999",N="Automatic",M="Basic Colors",L="Preview (Old/New)",x="visible",z="Recent Colors",A="OK",C="field",E="green",G="__xM",I="red";
qx.Class.define(U,{extend:qx.ui.popup.Popup,implement:[qx.ui.form.IColorForm],construct:function(){qx.ui.popup.Popup.call(this);
this.setLayout(new qx.ui.layout.VBox(5));
this._createChildControl(c);
this._createBoxes();
this._createChildControl(g);
this._createChildControl(f);
this.addListener(o,this._onChangeVisibility,this);
},properties:{appearance:{refine:true,init:t},value:{nullable:true,apply:u,event:S},red:{check:h,init:null,nullable:true,event:s},green:{check:h,init:null,nullable:true,event:O},blue:{check:h,init:null,nullable:true,event:w}},members:{__xK:1e5,__xL:null,__xM:null,__xN:null,__xO:v,__xP:12,_createChildControlImpl:function(Y,ba){var bb;

switch(Y){case C:bb=new qx.ui.core.Widget;
bb.addListener(X,this._onFieldMouseDown,this);
bb.addListener(D,this._onFieldMouseOver,this);
bb.addListener(J,this._onFieldMouseOut,this);
break;
case c:bb=new qx.ui.form.Button(this.tr(N));
bb.setAllowStretchX(true);
bb.addListener(l,this._onAutomaticBtnExecute,this);
this.add(bb);
break;
case f:bb=new qx.ui.form.Button(this.tr(K));
bb.addListener(l,this._onSelectorButtonExecute,this);
this.add(bb);
break;
case g:bb=new qx.ui.groupbox.GroupBox(this.tr(L));
bb.setLayout(new qx.ui.layout.HBox);
bb.add(this._createChildControl(k,true),{flex:1});
bb.add(this._createChildControl(m,true),{flex:1});
this.add(bb);
break;
case k:bb=new qx.ui.container.Composite(new qx.ui.layout.Basic);
break;
case m:bb=new qx.ui.container.Composite(new qx.ui.layout.Basic);
break;
case b:bb=new qx.ui.form.Button(this.tr(A));
bb.addListener(l,this._onColorSelectorOk,this);
break;
case d:bb=new qx.ui.form.Button(this.tr(B));
bb.addListener(l,this._onColorSelectorCancel,this);
break;
}return bb||qx.ui.popup.Popup.prototype._createChildControlImpl.call(this,Y);
},_createBoxes:function(){this.__xL={};
var bd=this._tables;
var bg,bc,be;
var j=0;

for(var bf in bd){bg=bd[bf];
bc=new qx.ui.groupbox.GroupBox(bg.label);
bc.setLayout(new qx.ui.layout.HBox);
this.__xL[bf]=bc;
this.add(bc);

for(var i=0;i<this.__xP;i++){be=this.getChildControl(p+(j++));
be.setBackgroundColor(bg.values[i]||null);
bc.add(be);
}}},_createColorSelector:function(){if(this.__xN){return;
}var bh=new qx.ui.window.Window(this.tr(n));
this.__xM=bh;
bh.setLayout(new qx.ui.layout.VBox(16));
bh.setResizable(false);
bh.moveTo(20,20);
this.__xN=new qx.ui.control.ColorSelector;
bh.add(this.__xN);
var bi=new qx.ui.container.Composite(new qx.ui.layout.HBox(8,F));
bh.add(bi);
var bk=this._createChildControl(d);
var bj=this._createChildControl(b);
bi.add(bk);
bi.add(bj);
},_applyValue:function(bl,bm){if(bl===null){this.setRed(null);
this.setGreen(null);
this.setBlue(null);
}else{var bn=qx.util.ColorUtil.stringToRgb(bl);
this.setRed(bn[0]);
this.setGreen(bn[1]);
this.setBlue(bn[2]);
}this.getChildControl(k).setBackgroundColor(bl);
this._rotatePreviousColors();
},_rotatePreviousColors:function(){if(!this._tables){return;
}var bq=this._tables[this.__xO].values;
var br=this.__xL[this.__xO];

if(!bq){return;
}var bs=this.getValue();

if(!bs){return;
}var bp=bq.indexOf(bs);

if(bp!=-1){qx.lang.Array.removeAt(bq,bp);
}else if(bq.length==this.__xP){bq.shift();
}bq.push(bs);
var bo=br.getChildren();

for(var i=0;i<bo.length;i++){bo[i].setBackgroundColor(bq[i]||null);
}},_onFieldMouseDown:function(e){var bt=this.getChildControl(m).getBackgroundColor();
this.setValue(bt);

if(bt){this.hide();
}},_onFieldMouseOver:function(e){this.getChildControl(m).setBackgroundColor(e.getTarget().getBackgroundColor());
},_onFieldMouseOut:function(e){var bx=this.getRed();
var bw=this.getGreen();
var bu=this.getBlue();
var bv=null;

if(bx!==null||bw!==null||bu!==null){var bv=qx.util.ColorUtil.rgbToRgbString([bx,bw,bu]);
}this.getChildControl(m).setBackgroundColor(bv);
},_onAutomaticBtnExecute:function(){this.setValue(null);
this.hide();
},_onSelectorButtonExecute:function(){this._createColorSelector();
this.exclude();
var bA=this.getRed();
var bz=this.getGreen();
var by=this.getBlue();

if(bA===null||bz===null||by===null){bA=255;
bz=255;
by=255;
}this.__xN.setRed(bA);
this.__xN.setGreen(bz);
this.__xN.setBlue(by);
this.__xM.open();
},_onColorSelectorOk:function(){var bB=this.__xN;
this.setValue(qx.util.ColorUtil.rgbToRgbString([bB.getRed(),bB.getGreen(),bB.getBlue()]));
this.__xM.close();
},_onColorSelectorCancel:function(){this.__xM.close();
},_onChangeVisibility:function(e){if(this.getVisibility()==x){var bF=this.getRed();
var bE=this.getGreen();
var bC=this.getBlue();
var bD=null;

if(bF!==null||bE!==null||bC!==null){var bD=qx.util.ColorUtil.rgbToRgbString([bF,bE,bC]);
}this.getChildControl(k).setBackgroundColor(bD);
this.getChildControl(m).setBackgroundColor(bD);
}},_tables:{core:{label:M,values:[Q,R,T,y,q,H,I,E,r,P,W,V]},recent:{label:z,values:[]}}},destruct:function(){this._disposeObjects(G,a);
this._tables=this.__xL=null;
}});
})();
(function(){var m="engine.name",l="Command",k="mshtml",h="gecko",g="Custom",f="Content",d="Internal",c="inserthtml",b="backgroundimage",a="backgroundcolor",bi="webkit",bh="backgroundColor",bg="mousedown",bf="qx.debug",be="table",bd="backgroundImage",bc="backgroundRepeat",bb="p",ba="backgroundPosition",Y="td",t="img",u="inserthyperlink",r="mouseup",s="keypress",p="qx.bom.htmlarea.HtmlArea.debug",q="undo",n="pageup",o="b",x="control",y="shift",G="end",E="right",O="qx_link",J="insertunorderedlist",U="Undo",S="pagedown",A="k",X="home",W="__xQ",V="a",z="insertorderedlist",C="y",D="justifyright",F="redo",H="insertParagraph",K="qx.bom.htmlarea.manager.UndoRedo",P="left",T="i",v="u",w="enter",B="Redo",N="insertimage",M="z",L="undoRedoState",R="down",Q="up",I="body";
qx.Class.define(K,{extend:qx.core.Object,construct:function(bj,bk){qx.core.Object.call(this);
this.__xQ=bj;
this.__xR=bk;
this.__xS=[];
this.__xT=[];
this._commands=null;
this.__xU=null;
this.__xV={};
this.__xW={command:true,content:true,custom:true};
this.__yv();
this.__xX=qx.lang.Function.bind(this._handleKeyPress,this);
this.__xY=qx.lang.Function.bind(this._handleMouseUp,this);

if((qx.core.Environment.get(m)==k)){this.__ya=qx.lang.Function.bind(this._handleMouseDown,this);
}},members:{__yb:false,__yc:false,__yd:false,__xW:null,__xV:null,__xQ:null,__xU:null,__xS:null,__xT:null,__xR:null,__xX:null,__xY:null,__ya:null,__ye:null,setContentDocument:function(bl){this.__xU=bl;
this.__xQ.setContentDocument(bl);
qx.event.Registration.addListener(bl.body,s,this.__xX,this);
qx.event.Registration.addListener(bl.body,r,this.__xY,this);

if((qx.core.Environment.get(m)==k)){qx.event.Registration.addListener(bl.body,bg,this.__ya,this,true);
}},insertParagraphOnLinebreak:function(){return this.__xQ.insertParagraphOnLinebreak();
},execute:function(bm,bn){var bo;
bm=bm.toLowerCase();
if(this._commands[bm]){if(this._commands[bm].passthrough){bo=this.__xQ.execute(bm,bn);
}else{bo=this[bm].call(this);
}}else{if((qx.core.Environment.get(m)==k)||(qx.core.Environment.get(m)==bi)){this.__yw(bm,bn,this.__xQ.getCommandObject(bm));
bo=this.__xQ.execute(bm,bn);
if(!bo){this.__xS.pop();
}}else{bo=this.__xQ.execute(bm,bn);

if(bo){this.__yw(bm,bn,this.__xQ.getCommandObject(bm));
}}
if(bm==q&&this.__xS.length==0){this.__yc=false;
this.__yE();
}else if(bm==F&&this.__xT.length==0){this.__yb=false;
this.__yE();
}}this.__yd=false;
return bo;
},addUndoStep:function(bp,bq,br){this.__yw(bp,bq,br);
},registerHandler:function(bs,bt,bu,bv){this.__xV[bs]={undo:bt,redo:bu,context:bv};
},isUndoPossible:function(){return this.__yc;
},undo:function(){var by;

if(this.__yd){this.__yy();
}if(this.__xS.length>0){var bx=this.__xS.pop();

if(this.__xW[bx.actionType.toLowerCase()]){switch(bx.actionType){case l:by=this.__yg(bx);
break;
case f:by=this.__yk(bx);
break;
case d:by=this.__yj(bx);
break;
case g:by=this.__yf(bx);
break;
}}else if(this.__xV[bx.actionType]){var bw=this.__xV[bx.actionType];
by=bw.undo.call(bw.context?bw.context:this,bx);
this.__yA(bx);
}else{this.error("actionType "+bx.actionType+" is not managed! Please provide a handler method!");
}this.__yb=true;
this.__yE();
return by;
}},__yf:qx.core.Environment.select(m,{"mshtml|webkit":function(bz){var bA=this.__xU.body.innerHTML;
var bC=bz.content;
this.__xU.body.innerHTML=bC;
var bB=bz;
bB.content=bA;
this.__yA(bB);
return true;
},"default":function(bD){var bH=bD;
var bG=qx.bom.element.Style;
switch(bD.command){case a:bH.parameter=[bG.get(this.__xU.body,bh)];
break;
case b:bH.parameter=[bG.get(this.__xU.body,bd),bG.get(this.__xU.body,bc),bG.get(this.__xU.body,ba)];
break;
}this.__yA(bH);
if(bD.command==u){if((qx.core.Environment.get(m)==h)){var bF=O+this.__xQ.__hyperLinkId;
var bE=this.__xU.getElementById(bF);

if(bE){bE.parentNode.removeChild(bE);
return true;
}else{return false;
}}}else{return this.__xQ.execute(bD.command,bD.value);
}}}),__yg:qx.core.Environment.select(m,{"mshtml|webkit":function(bI){},"default":function(bJ){this.__yA(bJ);

if((qx.core.Environment.get(m)==h)){if(bJ.command==c&&bJ.value==qx.bom.htmlarea.HtmlArea.EMPTY_DIV&&this.__yh(c,H)){this.__yi();
}}return this.__yl();
}}),__yh:function(bK,bL){if(this.__xS.length>0){var bM=this.__xS[this.__xS.length-1];
return (bM.command==bK&&bM.value==bL);
}return false;
},__yi:function(){this.__yl();

if(this.__xS.length>0){var bN=this.__xS.pop();
this.__yA(bN);
}},__yj:function(bO){this.__yA(bO);
return this.__yl();
},__yk:qx.core.Environment.select(m,{"gecko":function(bP){this.__yA(bP);

try{return this.__yl();
}catch(bQ){}},"mshtml|webkit":function(bR){},"default":function(bS){this.__yA(bS);
return this.__yl();
}}),__yl:function(){try{return this.__xU.execCommand(U,false,null);
}catch(e){return false;
}},isRedoPossible:function(){return this.__yb;
},redo:function(){if(this.__yb){var bU;
if(this.__xT.length>0){var bV=this.__xT.pop();

if(this.__xW[bV.actionType.toLowerCase()]){switch(bV.actionType){case l:bU=this.__yn(bV);
break;
case f:bU=this.__yt(bV);
break;
case d:bU=this.__ys(bV);
break;
case g:bU=this.__ym(bV);
break;
}}else if(this.__xV[bV.actionType]){var bT=this.__xV[bV.actionType];
bU=bT.redo.call(bT.context?bT.context:this,bV);
this.__yz(bV);
}else{this.error("actionType "+bV.actionType+" is not managed! Please provide a handler method!");
}this.__yc=true;
this.__yE();
}return bU;
}},__ym:qx.core.Environment.select(m,{"mshtml|webkit":function(bW){var bX=this.__xU.body.innerHTML;
var ca=bW.content;
this.__xU.body.innerHTML=ca;
var bY=bW;
bY.content=bX;
this.__yz(bY);
return true;
},"default":function(cb){this.__yz(cb);
return this.__yu();
}}),__yn:qx.core.Environment.select(m,{"mshtml|webkit":function(cc){},"default":function(cd){this.__yz(cd);
var ce=this.__yu();

if((qx.core.Environment.get(m)==h)){if(this.__yo(c,qx.bom.htmlarea.HtmlArea.EMPTY_DIV)){var cf=this.__yp();
this.__yq();

if(cf!=null){this.__yr(cf);
}}}return ce;
}}),__yo:function(cg,ch){if(this.__xT.length>0){var ci=this.__xT[this.__xT.length-1];
return (ci.command==cg&&ci.value==ch);
}return false;
},__yp:function(){if(this.__xR==null){return null;
}var cj=this.__xR.getSelection();
var ck=cj?cj.focusNode:null;

if(ck==null){return null;
}
try{while(ck.nodeName.toLowerCase()!=bb){ck=ck.parentNode;

if(!ck||qx.dom.Node.isNodeName(ck,I)){return null;
}}}catch(cl){return null;
}
if(ck!=null&&qx.dom.Node.isNodeName(ck,bb)){return ck;
}else{return null;
}},__yq:function(){var cm=this.__xT.pop();
this.__yz(cm);
this.__yu();
},__yr:qx.core.Environment.select(m,{"gecko":function(cn){if(cn==this.__xR.getContentBody().lastChild){return;
}var cq=cn.firstChild;

while(cq.firstChild){cq=cq.firstChild;
}var co=this.__xR.getSelection();
var cp=this.__xR.getRange();

if(co&&cp){cp.selectNode(cq);
co.addRange(cp);
cp.collapse(true);
}},"default":qx.lang.Function.empty}),__ys:function(cr){this.__yz(cr);
return this.__yu();
},__yt:qx.core.Environment.select(m,{"mshtml|webkit":function(cs){},"default":function(ct){this.__yz(ct);
return this.__yu();
}}),__yu:function(){try{return this.__xU.execCommand(B,false,null);
}catch(e){return false;
}},__yv:function(){this._commands={undo:{passthrough:false},redo:{passthrough:false}};
this.__xQ.getCommandObject(a).customUndo=true;
this.__xQ.getCommandObject(b).customUndo=true;

if((qx.core.Environment.get(m)==h)){}},__yw:qx.core.Environment.select(m,{"mshtml|webkit":function(cu,cv,cw){var cx=this.getUndoRedoObject();
cx.commandObject=cw;
cx.command=cu;
cx.value=cv;
cx.actionType=g;
cx.content=this.__xU.body.innerHTML;
this.__yx(cx);
},"default":function(cy,cz,cA){if(this.__xR==null){return;
}var cC=this.getUndoRedoObject();
cC.commandObject=cA;
cC.command=cy;
cC.value=cz;
cC.actionType=g;
var cB=this.__xR.getSelection();

if(cA.customUndo){var cD=[];

switch(cy){case a:cD.push(qx.bom.element.Style.get(this.__xU.body,bh));
break;
case b:cD.push(qx.bom.element.Style.get(this.__xU.body,bd),qx.bom.element.Style.get(this.__xU.body,bc),qx.bom.element.Style.get(this.__xU.body,ba));
break;
case u:if(cB&&!cB.isCollapsed){cC.actionType=l;
}break;
}cC.parameter=cD;
}else{if((qx.core.Environment.get(m)==h)){if(cB&&cB.isCollapsed){switch(cy){case z:case J:case D:case c:case N:cC.actionType=l;
break;
default:return;
}}else{cC.actionType=l;
}}else{cC.actionType=l;
}}this.__yx(cC);
}}),__yx:function(cE){if(this.__yd){this.__yy();
}this.__yz(cE);
this.__yb=false;
this.__xT=[];
this.__yE();
},__yy:function(){var cF=this.__xS[this.__xS.length-1];

if(cF==null||cF.actionType!=f){var cG=this.getUndoRedoObject();
cG.actionType=f;

if((qx.core.Environment.get(m)==k)||(qx.core.Environment.get(m)==bi)){cG.content=this.__ye;
cG.actionType=g;
this.__ye=null;
}this.__yz(cG);
this.__yd=false;
}},getUndoRedoObject:function(){return {actionType:null,commandObject:null,command:null,value:null,parameter:null,range:null,marker:null,content:null};
},__yz:function(cH){if((qx.core.Environment.get(bf))&&qx.core.Environment.get(p)){this.debug("ADD TO UNDO STACK");
this.debug(cH.actionType+" "+cH.command+" "+cH.value);
}this.__xS.push(cH);
},__yA:function(cI){if((qx.core.Environment.get(bf))&&qx.core.Environment.get(p)){this.debug("ADD TO REDO STACK");
this.debug(cI.actionType+" "+cI.command+" "+cI.value);
}this.__xT.push(cI);
},_handleKeyPress:function(e){var cJ=e.getKeyIdentifier().toLowerCase();
var cK=e.isCtrlPressed();

switch(cJ){case x:case y:case P:case E:case Q:case R:case n:case S:case X:case G:case w:break;
case V:case o:case T:case v:case A:case C:case M:if(!cK){this.__yB();
}break;
default:this.__yb=false;
this.__xT=[];
this.__yB();
}},__yB:function(){if(!this.__yd){this.__yd=true;
this.__yc=true;
if((qx.core.Environment.get(m)==k)||(qx.core.Environment.get(m)==bi)){this.__ye=this.__xU.body.innerHTML;
}this.__yE();
}},__yC:null,_handleMouseDown:qx.core.Environment.select(m,{"mshtml":function(e){var cL=e.getOriginalTarget();

if(qx.dom.Node.isElement(cL)&&(qx.dom.Node.isNodeName(cL,t)||qx.dom.Node.isNodeName(cL,be))){this.__yC={node:cL,content:cL.outerHTML};
}else{this.__yC=null;
}},"default":function(e){return true;
}}),_handleMouseUp:qx.core.Environment.select(m,{"gecko":function(e){if(this.__xR==null){return;
}var cN=this.__xR.getSelection();

if(!cN){this.__yC=null;
return;
}var cM=cN.anchorNode;
var cO=cM.childNodes[cN.anchorOffset];
if(qx.dom.Node.isNodeName(cO,t)){if(this.__yC==null){this.__yC=cO.cloneNode(true);
}else{if(this.__yC.style.width!=cO.style.width||this.__yC.style.height!=cO.style.height){this.__yD();
this.__yC=cO.cloneNode(true);
}}}else if(qx.dom.Node.isNodeName(cM,Y)||qx.dom.Node.isNodeName(cM.parentNode,Y)){var cP=cM.parentNode;

while(qx.dom.Node.isNodeName(cP,be)){cP=cP.parentNode;
}if(this.__yC==null){this.__yC=cP.cloneNode(true);
}else{qx.event.Timer.once(function(){if(cP.style.width!=this.__yC.style.width||cP.style.height!=this.__yC.style.height||cP.innerHTML!=this.__yC.innerHTML){this.__yD();
this.__yC=cP.cloneNode(true);
}},this,0);
}}else{this.__yC=null;
}},"default":function(e){var cQ=qx.bom.Event.getTarget(e);

if(this.__yC!=null){if(cQ.nodeType==1){if(cQ==this.__yC.node){if(cQ.outerHTML!=this.__yC.content){this.__yC.content=cQ.outerHTML;
this.__yD();
}}else{for(var i=0,j=cQ.childNodes.length;i<j;i++){if(cQ.childNodes[i]==this.__yC.node){if(cQ.childNodes[i].outerHTML!=this.__yC.content){this.__yC.content=cQ.childNodes[i].outerHTML;
this.__yD();
}}}}}else{this.__yC=null;
}}}}),__yD:qx.core.Environment.select(m,{"mshtml|webkit":function(){this.__yw(d,null,null);
},"default":function(){var cR=this.getUndoRedoObject();
cR.actionType=d;
this.__yz(cR);
}}),__yE:function(){qx.event.Timer.once(function(e){if(this.__xR!=null){var cS={undo:this.isUndoPossible()?0:-1,redo:this.isRedoPossible()?0:-1};
this.__xR.fireDataEvent(L,cS);
}},this,200);
}},destruct:function(){try{qx.event.Registration.removeListener(this.__xU.body,s,this.__xX);
qx.event.Registration.removeListener(this.__xU,r,this.__xY);

if((qx.core.Environment.get(m)==k)){qx.event.Registration.removeListener(this.__xU,bg,this.__ya);
}}catch(e){}this._disposeObjects(W);
this.__xR=this.__xS=this.__xT=this._commands=this.__xU=null;
this.__xW=this.__xV=null;
}});
})();
(function(){var dT="engine.name",dS="",dR="mshtml",dQ="gecko",dP="webkit",dO="opera",dN="qx.event.type.Data",dM="id",dL="qx.event.type.Event",dK=" ",cu="Boolean",ct="__elementToFocus__",cs="enter",cr='"',cq="left",cp="text-align",co="right",cn="qx.bom.htmlarea.HtmlArea.debug",cl="qx.debug",ck="engine.version",eb="br",ec="inserthtml",dY="italic",ea="body",dW="underline",dX="old_id",dU="b",dV="loadingError",ed="contextmenu",ee="pageup",dr="backgroundcolor",dq="end",dt="div",ds='On',dv="redo",du="i",dx="backspace",dw="bold",dp="mouseup",dn="y",o="style",p="backgroundimage",q="100%",r='</head>',t='<head>',u="k",v=":",w='redo',x='Off',y='">',et="down",es="font-family",er="g",eq="keypress",ey="fontsize",ew="undo",ev="text-decoration",eu="pagedown",eA="justify",ez="center",br="p",bs='</style>',bp="u",bq="focus",bv="control",bw="click",bt='<style type="text/css">',bu="up",bn="blur",bo="font-size",S="None",R="'",U="delete",T="_moz_dirty",O=">",N='</body></html>',Q="line-through",P="String",M="z",L=";",bC="fontfamily",bD="keydown",bE="keyup",bF="focusout",by="-",bz='</span>',bA="backgroundColor",bB="li",bG='undo',bH="<br class='webkit-block-placeholder' />",bg="textbackgroundcolor",bf="Function",be="fontSize",bd="textcolor",bc="home",bb="<",ba="focused",Y="fontFamily",bk="load",bj='<font ',bI='id="__elementToFocus__"',bJ="setUnderline",bK="backgroundPosition",bL="<!--",bM=' size="',bN='/www.w3.org/1999/xhtml" xml:lang="en" lang="en">',bO="'>",bP='underline',bQ='bold',bR="&copy;",cC="ul",cB="cursorContext",cA="readyAfterInvalid",cz="styleWithCSS",cG="span",cF=" />",cE="setBold",cD="P",cK="<P>&nbsp;</P>",cJ="</",di="qx/static/blank.html",dj="&gt;",dg='="',dh="paddingLeft",de="X",df="inserthorizontalrule",dc='<p>',dd='</font>',dk="#",dl="backgroundRepeat",dB="insertimage",dA="a",dD="&amp;",dC="removeformat",dF="marginLeft",dE="ready",dH="<p>&nbsp;</p>",dG='DOCTYPE html PUBLIC "-/',dz="browser.version",dy=" html, body {overflow-x: visible; } ",em='<body>',en="insertorderedlist",eo='body { font-size:100.01%; font-family:Verdana, Geneva, Arial, Helvetica, sans-serif; background-color:transparent; overflow:visible; background-image:none; margin:0px; padding:5px; } ',ep="hideFocus",eh="none",ei='/DTD XHTML 1.0 Transitional/',ej='<html xmlns="http:/',ek="S",ef="outline",eg="setItalic",n="font-style",m="marginBottom",l="xhtml",k="focusOut",h="justifyleft",g='</p>',f="paddingTop",d="Please use the method 'qx.dom.Node.isBlockNode' instead.",c='<title></title><meta http-equiv="Content-type" content="text/html; charset=UTF-8" />',b="Control",B='<span style="font-family:',C='/W3C/',z="placeholder",A='size',F="backgroundImage",G="marginTop",D="> ",E=" { ",I="font-weight",J="LI",cO='italic',cI='<!',cV="\ufeff",cR="&quot;",cx="marginRight",cv="STYLE",W="justifyfull",cy="inserthyperlink",bi="<br />",bh='html { margin:0px; padding:0px; } ',cc="__yH",cd="<br>",ce='/EN" "http:/',cf="justifycenter",cg="<br /><div id='placeholder'></div>",ch="useCSS",ci="object",cj="strikethrough",bY="text/html",ca="true",cw="1.9",cU='',cT=' style="',cS="indent",da="messengerContent",cY="Integer",cX="insertunorderedlist",cW="Text",cQ="&lt;",cP='<br _moz_editor_bogus_node="TRUE" _moz_dirty=""/>',H='<br/><div class="placeholder"></div>',bm="selectall",bl="transparent",cH=" SCRIPT STYLE DIV SPAN TR TD TBODY TABLE EM STRONG FONT A P B I U STRIKE H1 H2 H3 H4 H5 H6 ",bx="justifyright",cN='/www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',cM="ol",cL="//text()[string-length(normalize-space(.))>0]",V="outdent",db="about:blank",K="<body style='",X="qx.bom.htmlarea.HtmlArea",bS="paddingBottom",bT="Verdana",bU="$",bV="-->",bW=" }",bX="paddingRight",dm='html { width:100%; height:100%; margin:0px; padding:0px; overflow-y:auto; overflow-x:auto; } ',cb="Off",dJ='p { margin:0px; padding:0px; }',dI='body { font-size: 100.01%; font-family:Verdana, Geneva, Arial, Helvetica, sans-serif; width:100%; height:100%; background-color:transparent; overflow:auto; background-image:none; margin:0px; padding:5px; } ';
qx.Class.define(X,{extend:qx.core.Object,construct:function(eB,eC,eD,eE){qx.core.Object.call(this);
var eG=eE||qx.util.ResourceManager.getInstance().toUri(di);
this.__zc(eB);
this.__zd();
this._createAndAddIframe(eG);
this._addIframeLoadListener();
this.__yF=qx.bom.htmlarea.HtmlArea.__yI(eD);
if(qx.lang.Type.isString(eC)){this.__yG=eC;
}if((qx.core.Environment.get(dT)==dO)){var eF=qx.dom.Node.getWindow(eB);
var eH=qx.event.Registration.getManager(eF).getHandler(qx.event.handler.Keyboard);
eH._keyCodeToIdentifierMap[35]=dk;
eH._keyCodeToIdentifierMap[45]=by;
eH._keyCodeToIdentifierMap[112]=cD;
eH._keyCodeToIdentifierMap[115]=ek;
eH._keyCodeToIdentifierMap[120]=de;
}this.__yH=this.__zq();
},events:{"load":dL,"loadingError":dN,"messengerContent":dN,"cursorContext":dN,"ready":dL,"readyAfterInvalid":dL,"focused":dL,"focusOut":dL,"contextmenu":dN,"undoRedoState":dN},statics:{simpleLinebreak:cd,EMPTY_DIV:"<div></div>",GetWordsRegExp:/([^\u0000-\u0040\u005b-\u005f\u007b-\u007f]|['])+/g,CleanupWordsRegExp:/[\u0000-\u0040]/gi,hotkeyInfo:{bold:{method:cE},italic:{method:eg},underline:{method:bJ},undo:{method:ew},redo:{method:dv}},__yI:function(eI){if(eI==null||eI==dS){return dS;
}else if(typeof eI==ci){var eJ=dS;

for(var i in eI){eJ+=i+E+eI[i]+bW;
}return eJ;
}else{return eI;
}},__yJ:function(eK){var eL={};
var a=eK.split(L);
var i;

for(i=0;i<a.length;i++){var eM=a[i],eN=eM.indexOf(v);

if(eN===-1){continue;
}var name=qx.lang.String.trim(eM.substring(0,eN));
var eO=qx.lang.String.trim(eM.substring(eN+1,eM.length));

if(name&&eO){eL[name]=eO;
}}return eL;
},__yK:function(eP,eQ,eR,eS){var eX=[];

switch(eP.nodeType){case 1:case 11:var i;
var eV=eP.tagName.toLowerCase();
var fa={};
var eT={};
var closed=(!(eP.hasChildNodes()||qx.bom.htmlarea.HtmlArea.__yL(eP)));

if(eQ){if((qx.core.Environment.get(dT)==dR)){if(eV==dt&&eP.className&&eP.className==z){for(i=eP.firstChild;i;i=i.nextSibling){eX.push(qx.bom.htmlarea.HtmlArea.__yK(i,true,eR,eS));
}return eX.join(dS);
}}var eY=eP.attributes;
var eW=eY.length;
var a;

if((qx.core.Environment.get(dT)==dQ)){if(eV==cG&&eW==1&&eY[0].name==T&&eP.childNodes.length==0){return dS;
}}
for(i=0;i<eW;i++){a=eY[i];
if(!a.specified){continue;
}var name=qx.dom.Node.getName(a);
var fb=a.nodeValue;
if(/(_moz|contenteditable)/.test(name)){continue;
}
if(name!=o){if(qx.core.Environment.get(dT)==dR){if(name==dM&&eP.getAttribute(dX)){fb=eP.getAttribute(dX);
}else if(!isNaN(fb)){fb=eP.getAttribute(name);
}else{fb=a.nodeValue;
}}else{fb=a.nodeValue;
}}else{fb=eP.style.cssText;
}
if(/(_moz|^$)/.test(fb)){continue;
}if(name==dX){continue;
}if(!fb){continue;
}if(name==dM&&fb==ct){continue;
}if(name.charAt(0)===bU){continue;
}fa[name]=fb;
}if(fa.style!==undefined){eT=qx.bom.htmlarea.HtmlArea.__yJ(fa.style);
delete fa.style;
}if(eS){var eU={domElement:eP,tag:eV,attributes:fa,styles:eT};
eS(eU);
eU.domElement=null;
eV=eU.tag;
}if(eV){eX.push(bb,eV);
for(var name in fa){var fb=fa[name];
eX.push(dK,name,dg,fb.toString().replace(new RegExp(cr,er),R),cr);
}if(!qx.lang.Object.isEmpty(eT)){eX.push(cT);

for(var name in eT){var fb=eT[name];
eX.push(name,v,fb.toString().replace(new RegExp(cr,er),R),L);
}eX.push(cr);
}eX.push(closed?cF:O);
}}for(i=eP.firstChild;i;i=i.nextSibling){eX.push(qx.bom.htmlarea.HtmlArea.__yK(i,true,eR,eS));
}if(eQ&&!closed&&eV){eX.push(cJ,eV,O);
}break;
case 3:eX.push(eR?eP.data:qx.bom.htmlarea.HtmlArea.__yM(eP.data));
break;
case 8:eX.push(bL,eP.data,bV);
break;
}return eX.join(dS);
},closingTags:cH,__yL:function(fc){return (qx.bom.htmlarea.HtmlArea.closingTags.indexOf(dK+fc.tagName+dK)!=-1);
},__yM:function(s){s=s.replace(/&/ig,dD);
s=s.replace(/</ig,cQ);
s=s.replace(/>/ig,dj);
s=s.replace(/\x22/ig,cR);
s=s.replace(/\xA9/ig,bR);
return s;
},isBlockNode:function(fd){var fe=qx.bom.htmlarea.HtmlArea.isBlockNode;
var ff=d;
qx.log.Logger.deprecatedMethodWarning(fe,ff);
return qx.dom.Node.isBlockNode(fd);
},isParagraphParent:function(fg){if(!qx.dom.Node.isElement(fg)){return false;
}fg=qx.dom.Node.getName(fg);
return /^(body|td|th|caption|fieldset|div)$/.test(fg);
},isHeadlineNode:function(fh){if(!qx.dom.Node.isElement(fh)){return false;
}var fi=qx.dom.Node.getName(fh);
return /^h[1-6]$/.test(fi);
}},properties:{contentType:{check:P,init:l},messengerMode:{check:cu,init:false},insertParagraphOnLinebreak:{check:cu,init:true},insertLinebreakOnCtrlEnter:{check:cu,init:true},postProcess:{check:bf,nullable:true,init:null},useUndoRedo:{check:cu,init:true},nativeContextMenu:{check:cu,init:false},defaultFontFamily:{check:P,init:bT},defaultFontSize:{check:cY,init:4}},members:{__yN:null,__yO:false,__yP:false,__yQ:false,__yR:false,__yS:false,__yH:null,__yT:null,__yU:null,__yV:null,__yW:null,__yF:null,__yX:null,__yY:null,__za:false,__zb:false,__zc:function(fj){if(qx.dom.Node.isElement(fj)&&qx.dom.Node.isNodeName(fj,dt)){this.__yN=fj;
}},_createAndAddIframe:function(fk){this.__yW=qx.bom.Iframe.create();
qx.bom.Iframe.setSource(this.__yW,fk);
if((qx.core.Environment.get(dT)==dR)){qx.bom.element.Attribute.set(this.__yW,ep,ca);
}else{qx.bom.element.Style.set(this.__yW,ef,eh);
}qx.bom.element.Style.setStyles(this.__yW,{width:q,height:q});
qx.dom.Element.insertBegin(this.__yW,this.__yN);
},_getIframeDocument:function(){return qx.bom.Iframe.getDocument(this.__yW);
},_getIframeWindow:function(){return qx.bom.Iframe.getWindow(this.__yW);
},_addIframeLoadListener:function(){qx.event.Registration.addListener(this.__yW,bk,this._loaded,this);
},__zd:function(){this.__yX={"xhtml":{doctype:cI+dG+C+ei+ce+cN,html:ej+bN,meta:c,style:qx.core.Environment.select(dT,{"mshtml":bh+dI,"default":dm+eo}),contentStyle:dJ,body:em,footer:N}};
},__yG:dS,getIframeObject:function(){return this.__yW;
},getCommandManager:function(){return this.__yH;
},setValue:function(fl){if(qx.lang.Type.isString(fl)){this.__yG=fl;
var fm=this._getIframeDocument();

if(fm&&fm.body){fm.body.innerHTML=this.__ze(fl);
}}},__ze:function(fn){var fq=dS;

if((qx.core.Environment.get(dT)==dQ)){if(qx.core.Environment.get(dz)<=2){fq+=cP;
}}var fr=fn.length==0?cV:dS;
var fp=qx.core.Environment.get(dT)==dQ||qx.core.Environment.get(dT)==dP?bI:cU;
var fo=dc+B+this.getDefaultFontFamily()+y+bj+fp+bM+this.getDefaultFontSize()+y+fq+fn+fr+dd+bz+g;
return fo;
},getValue:function(){return this.__yG;
},getComputedValue:function(fs){return this.getHtml(fs);
},getCompleteHtml:function(){var fu=this.__yX[this.getContentType()];
var ft=fu.html+t+fu.meta+bt+fu.contentStyle+bs+r;
ft+=K+this.__zf()+bO;
ft+=this.getHtml()+N;
return ft;
},__zf:function(){var fx=[bA,F,dl,bK,Y,be,G,m,dF,cx,f,bS,dh,bX];
var fw=qx.bom.element.Style;
var fv=this.getContentBody();
var fA={};
var fz,fB;
var fy=qx.core.Environment.get(dT)==dR?2:1;

for(var i=0,j=fx.length;i<j;i++){fz=fx[i];
fB=fw.get(fv,fz,fy);

if(fB!==undefined&&fB!=dS){fA[fz]=fB;
}}return qx.bom.element.Style.compile(fA);
},getContentDocument:function(){if(this.__yO){return this._getIframeDocument();
}},getContentBody:function(){if(this.__yO){return this._getIframeDocument().body;
}},getContentWindow:function(){if(this.__yO){return this._getIframeWindow();
}},getWords:function(fC){if(!fC){fC=this.getContentBody();
}
if(!fC){return [];
}var fE=fC.cloneNode(true);
var fG=fE.innerHTML;
fG=fG.replace(/>/gi,D);
fG=fG.replace(/\n/gi,dK);
fG=fG.replace(/<!--.*-->/gi,dS);
fE.innerHTML=fG;
var fD=qx.core.Environment.get(dT)==dR||qx.core.Environment.get(dT)==dO?fE.innerText:fE.textContent;
var fF=fD.match(qx.bom.htmlarea.HtmlArea.GetWordsRegExp);
return !fF?[]:fF;
},getWordsWithElement:function(){var fI=this.getTextNodes();
var fM={};
var i,j,fN,fJ,fH;

for(var i=0,fL=fI.length;i<fL;++i){fJ=fI[i];
fN=fJ.nodeValue.split(dK);

for(var j=0,fK=fN.length;j<fK;++j){fH=this._cleanupWord(fN[j]);

if(fH!=null&&fH.length>1){if(!fM[fH]){fM[fH]=[];
}fM[fH].push(fJ);
}}}return fM;
},_cleanupWord:function(fO){if(!fO){return null;
}return fO.replace(qx.bom.htmlarea.HtmlArea.CleanupWordsRegExp,dS);
},getTextNodes:function(){return this._fetchTextNodes(this.getContentBody());
},_fetchTextNodes:function(fP){var fR=[];
var fQ;
if(fP.hasChildNodes){for(var i=0;i<fP.childNodes.length;i++){fQ=this._fetchTextNodes(fP.childNodes[i]);
qx.lang.Array.append(fR,fQ);
}}if(fP.nodeType==3){if(fP.nodeValue.length>1){fR.push(fP);
}}return fR;
},__zg:0,__zh:function(){var fS=this._getIframeDocument();
if(!fS){this.__zg++;

if(this.__zg>5){this.error('cant load HtmlArea. Document is not available. '+fS);
this.fireDataEvent(dV);
}else{qx.event.Timer.once(function(){this.__zh();
},this,0);
}}else{this.__zg=0;
this._onDocumentIsReady();
}},_loaded:function(e){if(this.__yQ){return;
}
if(this.__yP){this.__zi();
return;
}if((qx.core.Environment.get(dT)==dR)){this.__zh();
}else{this._onDocumentIsReady();
}},isReady:function(){return this.__yO;
},_onDocumentIsReady:function(){var fT=new qx.bom.htmlarea.manager.Command(this);

if(this.getUseUndoRedo()){fT=new qx.bom.htmlarea.manager.UndoRedo(fT,this);
}this.__yQ=true;
if((qx.core.Environment.get(dT)==dR)){this.setEditable(true);
}this.__zl();

if(!(qx.core.Environment.get(dT)==dO)){this.__zm();
}if(!(qx.core.Environment.get(dT)==dR)){this.setEditable(true);
}this.__yO=true;
this.__yH=fT;
fT.setContentDocument(this._getIframeDocument());
this.__zr();
if((qx.core.Environment.get(dT)==dO)){this.__zm();
}this.fireEvent(dE);
},forceEditable:qx.core.Environment.select(dT,{"gecko":function(){var fU=this._getIframeDocument();

if(fU){if(parseFloat(qx.core.Environment.get(ck))>=cw){fU.designMode=cb;
fU.body.contentEditable=false;
fU.body.contentEditable=true;
}else{fU.body.contentEditable=true;
this.__zs(true);
}}},"default":qx.lang.Function.empty}),invalidateEditor:qx.core.Environment.select(dT,{"gecko":function(){this.__yQ=false;
this.__yO=false;
this.__yP=true;
},"default":function(){}}),__zi:qx.core.Environment.select(dT,{"gecko":function(){this.__zl();
this.__zm();
this.__yH.setContentDocument(this._getIframeDocument());
this.setEditable(true);
this.forceEditable();
this.__yQ=true;
this.__yO=true;
this.__yP=false;
this.fireEvent(cA);
},"default":function(){}}),__zj:function(fV){var fX=dS;

if(!fV){return fX;
}
try{var fW=fV.getAttribute(o);

if(!fW){return fX;
}if((qx.core.Environment.get(dT)==dR)){fX=fW.cssText;
}else{fX=fW;
}}catch(fY){this.error("can't extract style from elem. ");
}return fX;
},__zk:function(ga){var gb=qx.core.Environment.get(dT)==dQ?dy:dS;
var gc=this.__yX[this.getContentType()];
var gd=t+gc.meta+bt+gb+gc.style+gc.contentStyle+this.__yF+bs+r;
var content=gc.body+ga;
return gc.html+gd+content+gc.footer;
},__zl:function(){var gf=this.__ze(this.getValue());

if(qx.lang.Type.isString(gf)){var ge=this._getIframeDocument();

try{ge.open(bY,true);
ge.write(this.__zk(gf));
ge.close();
}catch(e){this.error("cant open document on source '"+qx.bom.Iframe.queryCurrentUrl(this.__yW)+"'",e);
this.fireDataEvent(dV,e);
}}},__zm:function(){this.__zn();
this.__zp();
this.__zo();
},__zn:function(){var gh=qx.event.Registration;
var gg=this._getIframeDocument();
gh.addListener(gg.body,eq,this._handleKeyPress,this);
gh.addListener(gg.body,bE,this._handleKeyUp,this);
gh.addListener(gg.body,bD,this._handleKeyDown,this);
},__zo:function(){var gk=qx.event.Registration;
var gi=this._getIframeDocument();
var gj=qx.core.Environment.get(dT)==dP?this._getIframeWindow():gi.body;
gk.addListener(gj,bq,this._handleFocusEvent,this);
gk.addListener(gj,bn,this._handleBlurEvent,this);
gk.addListener(gi,bF,this._handleFocusOutEvent,this);
},__zp:function(){var gn=qx.event.Registration;
var gm=this._getIframeDocument();
var gl=qx.core.Environment.get(dT)==dR?bw:dp;
gn.addListener(gm.body,gl,this._handleMouseUpOnBody,this);
gn.addListener(gm.documentElement,gl,this._handleMouseUpOnDocument,this);
gn.addListener(gm.documentElement,ed,this._handleContextMenuEvent,this);
},__zq:function(){if(this.__yT==null){this.__yT={execute:function(go,gp){this.stackedCommands=true;
this.commandStack.push({command:go,value:gp});
},commandStack:[],stackedCommands:false};
}this.__yT.stackedCommands=false;
return this.__yT;
},__zr:function(){var gq=this.__yT;

if(gq!=null&&gq.stackedCommands){var gr=gq.commandStack;

if(gr!=null){for(var i=0,j=gr.length;i<j;i++){this.__yH.execute(gr[i].command,gr[i].value);
}}}},__zs:function(gs){var gt=this._getIframeDocument();

if(this.__yQ&&gt){try{if((qx.core.Environment.get(dT)==dQ)){gt.designMode=(gs!==false)?x:ds;
}gt.designMode=(gs!==false)?ds:x;
}catch(e){}}},setEditable:function(gu){if(this.__yQ){this.__zs(true);
if((qx.core.Environment.get(dT)==dQ)){try{var gv=this._getIframeDocument();
gv.execCommand(cz,false,true);
}catch(gw){try{var gv=this._getIframeDocument();
gv.execCommand(ch,false,false);
}catch(gx){if(!this.__yO){this.error("Failed to enable rich edit functionality");
this.fireDataEvent(dV,gx);
}else{throw new Error("Failed to enable rich edit functionality");
}}}}this.__yR=gu;
}},getEditable:function(){return this.__yR;
},isEditable:function(){return this.__yR;
},__zt:false,_handleKeyUp:function(e){var gy=e.getKeyIdentifier().toLowerCase();
this.__yU=e;

if((qx.core.Environment.get(cl))&&qx.core.Environment.get(cn)){this.debug(e.getType()+" | "+gy);
}if(qx.core.Environment.get(dT)==dR||qx.core.Environment.get(dT)==dP){if(this.__zt){switch(gy){case cs:if(this.getInsertLinebreakOnCtrlEnter()){if((qx.core.Environment.get(dT)==dP)){this.__zu();
e.preventDefault();
e.stopPropagation();
}else{var gz=this.__zE(this.getSelection());

if(gz){gz.collapse(true);
gz.pasteHTML(H);
}}this.__zz();
}break;
case bv:this.__zt=false;
return;
break;
}}}else if((qx.core.Environment.get(dT)==dQ)){switch(gy){case cq:case co:case bu:case et:case ee:case eu:case U:case dq:case dx:this.__yS=(this.getFocusNode()==this.getContentBody().firstChild);
break;
}}},__zu:function(){var gA=this.getSelection();
var gB=dS;
if(gA&&(gA.focusNode.textContent==dS||gA.focusNode.parentElement.tagName==J)){gB=bH;
}this.__yH.execute(ec,gB+qx.bom.htmlarea.HtmlArea.simpleLinebreak);
},_handleKeyDown:qx.core.Environment.select(dT,{"mshtml|webkit":function(e){var gC=e.getKeyIdentifier().toLowerCase();

if((qx.core.Environment.get(cl))&&qx.core.Environment.get(cn)){}if(this.__zt&&(gC==M||gC==dn||gC==dU||gC==bp||gC==du||gC==u)){e.preventDefault();
e.stopPropagation();
}if(gC==bv){this.__zt=true;
}},"default":function(e){}}),_handleKeyPress:function(e){var gH=this.getContentDocument();
var gD=e.getKeyIdentifier().toLowerCase();
var gF=e.isCtrlPressed();
var gG=e.isShiftPressed();
this.__yU=e;

if((qx.core.Environment.get(cl))&&qx.core.Environment.get(cn)){this.debug(e.getType()+" | "+gD);
}if(this.__za){var gO=!((qx.core.Environment.get(dT)==dR)&&gD==cs)||!((qx.core.Environment.get(dT)==dQ)&&gD==cs);

if(gO){this.__zz();
this.__za=false;
}}
switch(gD){case cs:if(!gG&&!gF&&this.getMessengerMode()){e.preventDefault();
e.stopPropagation();
var gM=new qx.event.type.Data(da,this.getComputedValue());
this.dispatchEvent(gM,true);
this.resetHtml();
}if(gF){if(!this.getInsertLinebreakOnCtrlEnter()){return;
}e.preventDefault();
e.stopPropagation();

if((qx.core.Environment.get(dT)==dQ)){if(this.__zC()){this.insertHtml(bi);
this.__zz();
return;
}this.insertHtml(cg);
}else if((qx.core.Environment.get(dT)==dO)){var gN=this.getSelection();
var gI=this.__zE(gN);

if(gN&&gI){var gJ=gH.createElement(eb);
gI.collapse(true);
gI.insertNode(gJ);
gI.collapse(true);
gI.selectNode(gJ);
gN.addRange(gI);
gI.collapse(true);
}}this.__zz();
}if((qx.core.Environment.get(dT)==dR)){if(!this.getInsertParagraphOnLinebreak()){if(this.__yH.execute(ec,qx.bom.htmlarea.HtmlArea.simpleLinebreak)){this.__zz();
e.preventDefault();
e.stopPropagation();
}}}else if((qx.core.Environment.get(dT)==dQ)){if(this.getInsertParagraphOnLinebreak()&&!gG&&!gF){var gN=this.getSelection();

if(gN){var gE=gN.focusNode;
if(this.__zC()){this.__zz();
return;
}if(this.__zD()){this.__zz();
return;
}while(!qx.dom.Node.isNodeName(gE,ea)){if(qx.dom.Node.isNodeName(gE,bB)){this.__zz();
return;
}gE=gE.parentNode;
}}this.__yH.insertParagraphOnLinebreak();
e.preventDefault();
e.stopPropagation();
this.__zz();
this.__za=true;
}}else if((qx.core.Environment.get(dT)==dP)){if(this.getInsertParagraphOnLinebreak()&&gG){this.__zu();
e.preventDefault();
e.stopPropagation();
this.__zz();
}}break;
case bu:if(qx.core.Environment.get(dT)==dQ&&qx.core.Environment.get(ck)<1.9&&gG){var gN=this.getSelection();
if(gN&&gN.focusNode==gH.body.firstChild){if(this.__yS){if(gN.focusOffset!=0){gN.extend(gN.focusNode,0);
}}}}this.__zz();
break;
case bc:if(qx.core.Environment.get(dT)==dQ&&qx.core.Environment.get(ck)<1.9){if(gF){var gN=this.getSelection();
if(gG){if(gN&&(gN.focusOffset!=0)||(gN.focusNode!=gH.body.firstChild)){gN.extend(gH.body.firstChild,0);
}}else{var gK=null;
var gL;
if(gH){gK=gH.evaluate(cL,gH.body,null,XPathResult.ANY_TYPE,null);
}
if(gK&&gN){while(gL=gK.iterateNext()){if(gL&&gL.parentNode&&gL.parentNode.tagName!=cv){try{gN.extend(gL,0);

if(!this.isSelectionCollapsed()){gN.collapseToStart();
}}catch(e){}break;
}}}}}}this.__zz();
break;
case cq:case co:case et:case ee:case eu:case U:case dq:case dx:this.__zz();
break;
case dU:if(gF){this.__zv(bQ,true);
}break;
case du:case u:if(gF){this.__zv(cO,true);
}break;
case bp:if(gF){this.__zv(bP,true);
}break;
case M:if(gF&&!gG){this.__zv(bG,true);
}else if(gF&&gG){this.__zv(w,true);
}break;
case dn:if(gF){this.__zv(w,true);
}break;
case dA:if(gF){this.selectAll();
}break;
}this.__yU=null;
},__zv:function(gP,gQ){var gS=null;
var gR=qx.bom.htmlarea.HtmlArea.hotkeyInfo;

if(gR[gP]){gS=gR[gP].method;
}
if(gS!=null&&this[gS]){this[gS]();

if(gQ){this.__yU.preventDefault();
this.__yU.stopPropagation();
}
if(this.isSelectionCollapsed()){this.__za=true;
}this.__zz();
}},_handleFocusEvent:function(e){this.__yV=null;

if(qx.core.Environment.get(dT)==dQ||qx.core.Environment.get(dT)==dP){var gT=this.getContentDocument().getElementById(ct);

if(gT){qx.bom.element.Attribute.reset(gT,dM);
}}this.fireEvent(ba);
},_handleBlurEvent:function(e){this.__yG=this.getComputedValue();
},_handleFocusOutEvent:function(e){this.__zt=false;

if(this.__yV==null){this.__yV=this.getSelectedHtml();
}this.fireEvent(k);
},_handleMouseUpOnBody:function(e){if((qx.core.Environment.get(cl))&&qx.core.Environment.get(cn)){this.debug("handleMouse "+e.getType());
}this.__zb=true;
this.__zz();
},_handleMouseUpOnDocument:qx.core.Environment.select(dT,{"mshtml":qx.lang.Function.empty,"default":function(e){if(!this.__zb){qx.bom.Element.activate(this.getContentBody());
}this.__zb=false;
}}),_handleContextMenuEvent:function(e){if(!this.getNativeContextMenu()){var gW=e.getViewportLeft();
var gV=e.getViewportTop();
var gX=qx.bom.element.Location.getLeft(this.__yN)+gW;
var gY=qx.bom.element.Location.getTop(this.__yN)+gV;
var gU={x:gX,y:gY,relX:gW,relY:gV,target:e.getTarget()};
e.preventDefault();
e.stopPropagation();
qx.event.Timer.once(function(){this.fireDataEvent(ed,gU);
},this,0);
}},isLoaded:function(){return this.__yQ;
},insertHtml:function(ha){return this.__yH.execute(ec,ha);
},removeFormat:function(){var hb=this.__yH.execute(dC);
this.__yH.execute(ey,this.getDefaultFontSize());
this.__yH.execute(bC,this.getDefaultFontFamily());
return hb;
},setBold:function(){return this.__yH.execute(dw);
},setItalic:function(){return this.__yH.execute(dY);
},setUnderline:function(){return this.__yH.execute(dW);
},setStrikeThrough:function(){return this.__yH.execute(cj);
},setFontSize:function(hc){return this.__yH.execute(ey,hc);
},setFontFamily:function(hd){return this.__yH.execute(bC,hd);
},setTextColor:function(he){return this.__yH.execute(bd,he);
},setTextBackgroundColor:function(hf){return this.__yH.execute(bg,hf);
},setJustifyLeft:function(){return this.__yH.execute(h);
},setJustifyCenter:function(){return this.__yH.execute(cf);
},setJustifyRight:function(){return this.__yH.execute(bx);
},setJustifyFull:function(){return this.__yH.execute(W);
},insertIndent:function(){return this.__yH.execute(cS);
},insertOutdent:function(){return this.__yH.execute(V);
},insertOrderedList:function(){return this.__yH.execute(en);
},insertUnorderedList:function(){return this.__yH.execute(cX);
},insertHorizontalRuler:function(){return this.__yH.execute(df);
},insertImage:function(hg){return this.__yH.execute(dB,hg);
},insertHyperLink:function(hh){return this.__yH.execute(cy,hh);
},removeBackgroundColor:function(){this.__yH.execute(dr,bl);
},setBackgroundColor:function(hi){this.__yH.execute(dr,hi);
},removeBackgroundImage:function(){this.__yH.execute(p);
},setBackgroundImage:function(hj,hk,hl){return this.__yH.execute(p,[hj,hk,hl]);
},selectAll:function(){return this.__yH.execute(bm);
},undo:function(){if(this.getUseUndoRedo()){return this.__yH.execute(ew);
}else{return true;
}},redo:function(){if(this.getUseUndoRedo()){return this.__yH.execute(dv);
}else{return true;
}},resetHtml:function(){var hm=this._getIframeDocument();
while(hm.body.firstChild){hm.body.removeChild(hm.body.firstChild);
}if(qx.core.Environment.get(dT)==dQ){hm.body.innerHTML=dH;
}else if(qx.core.Environment.get(dT)==dP){var hn=this.getSelection();
var ho=hm.createRange();

if(ho&&hn){hn.addRange(ho);
}}},getHtml:function(hp){var hq=this._getIframeDocument();

if(hq==null){return null;
}return qx.bom.htmlarea.HtmlArea.__yK(hq.body,false,hp,this.getPostProcess());
},containsOnlyPlaceholder:qx.core.Environment.select(dT,{"mshtml":function(){var hr=this._getIframeDocument();
return (hr.body.innerHTML==cK);
},"default":qx.lang.Function.returnFalse}),_selectElement:function(hs){var hu=this.getContentWindow().getSelection();
var ht=this.getContentDocument().createRange();
ht.setStart(hs,0);
hu.removeAllRanges();
hu.addRange(ht);
},focusContent:qx.core.Environment.select(dT,{"gecko":function(){var hw=this.getContentDocument();
var hv=hw.getElementById(ct);
this.getContentWindow().focus();
qx.bom.Element.focus(this.getContentBody());

if(hv){this._selectElement(hv);
}else{this.__zw();
}},"webkit":function(){qx.bom.Element.focus(this.getContentWindow());
qx.bom.Element.focus(this.getContentBody());
var hx=this.getContentDocument().getElementById(ct);

if(hx){qx.bom.element.Attribute.reset(hx,dM);
}this.__zw();
},"opera":function(){qx.bom.Element.focus(this.getContentWindow());
qx.bom.Element.focus(this.getContentBody());
this.__zw();
},"default":function(){qx.bom.Element.focus(this.getContentBody());
this.__zw();
}}),__zw:function(){if(!this.__zx()){this.__zy();
}},__zx:qx.core.Environment.select(dT,{"gecko":function(){var hy=this.getContentBody().childNodes;

if(hy.length==0){return false;
}else if(hy.length==1){return !(hy[0]&&qx.dom.Node.isNodeName(hy[0],eb)&&qx.bom.element.Attribute.get(hy[0],T)!=null);
}else{return true;
}},"webkit":function(){var hz=this.getContentBody().childNodes;

if(hz.length==0){return false;
}else if(hz.length==1){return !(hz[0]&&qx.dom.Node.isNodeName(hz[0],eb));
}else{return true;
}},"default":function(){var hA=this.getContentBody().childNodes;

if(hA.length==0){return false;
}else if(hA.length==1){return !(hA[0]&&qx.dom.Node.isNodeName(hA[0],br)&&hA[0].firstChild==null);
}else{return true;
}}}),__zy:qx.core.Environment.select(dT,{"gecko|webkit":function(){this.getContentDocument().body.innerHTML=this.__ze(dS);
var hB=this.getContentDocument().getElementById(ct);
qx.bom.element.Attribute.reset(hB,dM);
this._selectElement(hB);
},"default":function(){var hC=qx.dom.Hierarchy.getFirstDescendant(this.getContentBody());

if(qx.dom.Node.isNodeName(hC,br)){qx.bom.element.Style.set(hC,es,this.getDefaultFontFamily());
qx.bom.element.Style.set(hC,bo,this.getDefaultFontSize());
}}}),getContextInformation:function(){return this.__zA();
},__zz:function(){qx.event.Timer.once(function(e){var hD=this.__zA();
this.fireDataEvent(cB,hD);
},this,200);
},__zA:function(){if(this._processingExamineCursorContext||this.getEditable()==false){return;
}this._processingExamineCursorContext=true;

if(!this.__zx()){this.__zy();
}var hH=this.getFocusNode();

if(hH==null){return;
}
if(qx.dom.Node.isText(hH)){hH=hH.parentNode;
}var hL=this._getIframeDocument();
var hU=(qx.core.Environment.get(dT)==dR)?hH.currentStyle:hL.defaultView.getComputedStyle(hH,null);
var hO=false;
var hE=false;
var hJ=false;
var hI=false;
var hP=false;
var hT=false;
var hK=false;
var hV=false;
var hG=false;
var hR=false;
var hS=null;
var hW=null;
var hN=null;

if(hU!=null){if((qx.core.Environment.get(dT)==dR)){hE=hU.fontStyle==dY;
hJ=hU.textDecoration.indexOf(dW)!==-1;
hI=hU.textDecoration.indexOf(Q)!==-1;
hS=hU.fontSize;
hN=hU.fontFamily;
hK=hU.textAlign==cq;
hV=hU.textAlign==ez;
hG=hU.textAlign==co;
hR=hU.textAlign==eA;
}else{hE=hU.getPropertyValue(n)==dY;
hJ=hU.getPropertyValue(ev).indexOf(dW)!==-1;
hI=hU.getPropertyValue(ev).indexOf(Q)!==-1;
hS=hU.getPropertyValue(bo);
hN=hU.getPropertyValue(es);
hK=hU.getPropertyValue(cp)==cq;
hV=hU.getPropertyValue(cp)==ez;
hG=hU.getPropertyValue(cp)==co;
hR=hU.getPropertyValue(cp)==eA;
}
if(qx.core.Environment.get(dT)==dR||qx.core.Environment.get(dT)==dO){hO=hU.fontWeight==700;
}else{hO=hU.getPropertyValue(I)==dw||qx.dom.Node.isNodeName(hH,dU);
}}var hF=hH;
if(hF!=null&&hF.parentNode!=null&&!qx.dom.Node.isDocument(hF.parentNode)){while(hF!=null&&!qx.dom.Node.isNodeName(hF,ea)){var hM=qx.dom.Node.getName(hF);

if(hM==cM){hT=true;
break;
}else if(hM==cC){hP=true;
break;
}
if(hW==null||hW==dS){hW=qx.bom.element.Attribute.get(hF,A);
}hF=hF.parentNode;
}}var hQ={bold:hO?1:0,italic:hE?1:0,underline:hJ?1:0,strikethrough:hI?1:0,fontSize:(hW==null)?hS:hW,fontFamily:hN,insertUnorderedList:hP?1:0,insertOrderedList:hT?1:0,justifyLeft:hK?1:0,justifyCenter:hV?1:0,justifyRight:hG?1:0,justifyFull:hR?1:0};
this._processingExamineCursorContext=false;
return hQ;
},getSelection:qx.core.Environment.select(dT,{"mshtml":function(){return this._getIframeDocument()?this._getIframeDocument().selection:null;
},"default":function(){return this._getIframeWindow()?this._getIframeWindow().getSelection():null;
}}),isSelectionCollapsed:qx.core.Environment.select(dT,{"mshtml":function(){return this.getSelection()&&this.getSelection().type==S;
},"default":function(){return this.getSelection()&&this.getSelection().isCollapsed;
}}),getSelectedText:qx.core.Environment.select(dT,{"mshtml":function(){return this.getRange()?this.getRange().text:dS;
},"default":function(){return this.getRange()?this.getRange().toString():dS;
}}),getSelectedHtml:function(){if(this.__yV!=null){return this.__yV;
}var hX=this.getRange();

if(!hX){return dS;
}else{return this.__zB(hX);
}},__zB:qx.core.Environment.select(dT,{"mshtml":function(hY){if(!hY){return dS;
}return hY.item?hY.item(0).outerHTML:hY.htmlText;
},"default":function(ia){var ib=this._getIframeDocument();

if(ib&&ia){try{var ic=ib.createElement(ea);
ic.appendChild(ia.cloneContents());
return ic.innerHTML;
}catch(id){}return ia+dS;
}return dS;
}}),clearSelection:qx.core.Environment.select(dT,{"mshtml":function(){var ie=this.getSelection();

if(ie){ie.empty();
}},"default":function(){var ig=this.getSelection();

if(ig){ig.collapseToStart();
}}}),__zC:qx.core.Environment.select(dT,{"gecko":function(){var ih=this.getSelection();
var ii=this.getFocusNode();
return ih&&this.isSelectionCollapsed()&&ii!=null&&qx.dom.Node.isText(ii)&&ih.anchorOffset<ii.length;
},"default":function(){return false;
}}),__zD:qx.core.Environment.select(dT,{"gecko":function(){return qx.dom.Node.isElement(this.getFocusNode());
},"default":function(){return false;
}}),getRange:function(){return this.__zE(this.getSelection());
},__zE:qx.core.Environment.select(dT,{"mshtml":function(ij){var ik=this._getIframeDocument();

if(ij){try{return ij.createRange();
}catch(il){return ik?ik.body.createTextRange():null;
}}else{return ik?ik.body.createTextRange():null;
}},"default":function(im){var io=this._getIframeDocument();

if(im){try{return im.getRangeAt(0);
}catch(ip){return io?io.createRange():null;
}}else{return io?io.createRange():null;
}}}),saveRange:qx.core.Environment.select(dT,{"mshtml":function(){this.__yY=this.getRange();
},"default":function(){}}),getSavedRange:qx.core.Environment.select(dT,{"mshtml":function(){return this.__yY;
},"default":function(){}}),resetSavedRange:qx.core.Environment.select(dT,{"mshtml":function(){this.__yY=null;
},"default":function(){}}),getFocusNode:qx.core.Environment.select(dT,{"mshtml":function(){var iq=this.getSelection();
var ir;

switch(iq.type){case cW:case S:ir=this.__zE(iq);

if(ir){ir.collapse(false);
return ir.parentElement();
}else{return null;
}break;
case b:ir=this.__zE(iq);

if(ir){try{ir.collapse(false);
}catch(is){}return ir.item(0);
}else{return null;
}break;
default:return this._getIframeDocument().body;
}},"default":function(){var it=this.getSelection();

if(it&&it.focusNode){return it.focusNode;
}return this._getIframeDocument().body;
}})},environment:{"qx.bom.htmlarea.HtmlArea.debug":false},destruct:function(){try{var iv=this._getIframeDocument();
var ix=qx.event.Registration;
ix.removeListener(iv.body,eq,this._handleKeyPress,this);
ix.removeListener(iv.body,bE,this._handleKeyUp,this);
ix.removeListener(iv.body,bD,this._handleKeyDown,this);
var iw=qx.core.Environment.get(dT)==dP?this._getIframeWindow():iv.body;
ix.removeListener(iw,bq,this._handleFocusEvent);
ix.removeListener(iw,bn,this._handleBlurEvent);
ix.removeListener(iv,bF,this._handleFocusOutEvent);
var iu=qx.core.Environment.get(dT)==dR?bw:dp;
ix.removeListener(iv.body,iu,this._handleMouseUpOnBody,this);
ix.removeListener(iv.documentElement,iu,this._handleMouseUpOnDocument,this);
ix.removeListener(iv.documentElement,ed,this._handleContextMenuEvent,this);

if((qx.core.Environment.get(dT)==dR)){qx.bom.Iframe.setSource(this.__yW,db);
}}catch(iy){}
if(this.__yH instanceof qx.core.Object){this._disposeObjects(cc);
}else{this.__yH=null;
}this.__yX=this.__yW=this.__yN=this.__yT=null;
}});
})();
(function(){var bv="",bu="target",bt="execute",bs="background",br="<tr>",bq="changeSelection",bp="font",bo="qooxdoo logo",bn="right",bm="</tr>",bb="changeValue",ba="qx/icon/Oxygen/16/actions/format-indent-more.png",Y="Georgia",X="http://",W="Change Font Size",V="colorselector-cancelbutton",U="Indent More",T="Zoom Window",S="Align Right",R="Format Italic",bC="qx/icon/Oxygen/16/actions/format-text-underline.png",bD="westorelggman/htmlarea/qooxdoo_logo.png",bA="westorelggman/htmlarea/insert-table.png",bB="OK",by="Comic Sans MS",bz="Tahoma",bw="<td>First Row, First cell</td>",bx="solid",bE="qx/icon/Oxygen/16/actions/format-justify-center.png",bF="Align Justify",bf="qx.event.type.Event",be="Inserted Unordered List",bh="Insert Horizontal Ruler",bg="ready",bj="HTML Code:",bi="Set Text Background Color",bl="Cancel",bk="<td>Second Row, First cell</td>",bd="</tbody>",bc="Undo Last Change",a="Set Text Color",b="Insert Table",c="qx/icon/Oxygen/16/actions/view-fullscreen.png",d="qx/icon/Oxygen/16/actions/edit-undo.png",f="qx/icon/Oxygen/16/actions/edit-clear.png",g="Arial Black",h="Impact",k="Redo Last Undo Step",l="Format Bold",m="westorelggman/htmlarea/format-fill-color.png",bJ="minmax",bI="Color Selector",bH="westorelggman.HtmlArea",bG="main",bN="Insert Hyperlink",bM="colorselector-okbutton",bL="Remove Format",bK="blank.html",bP="</table>",bO="12px ",B="<td>First Row, Second cell</td>",C="Insert Ordered List",z="qx/icon/Oxygen/16/actions/format-justify-left.png",A='',F="Courier",G="westorelggman/htmlarea/format-text-color.png",D="Courier New",E="qx/icon/Oxygen/16/actions/format-justify-right.png",x="qx/icon/Oxygen/16/actions/format-text-bold.png",y="<td>Second Row, Second cell</td>",u="Align Left",t="westorelggman/htmlarea/format-list-ordered.png",w="<table border='1'>",v="qx/icon/Oxygen/16/actions/format-indent-less.png",q="<tbody>",p="Times New Roman",s="Align Center",r="qx/icon/Oxygen/16/actions/edit-redo.png",o="Lucida Console",n="border-main",L="qx/icon/Oxygen/16/actions/format-text-italic.png",M="Change Font Family",N="Arial",O="qx/icon/Oxygen/16/actions/format-justify-fill.png",H="Verdana",I="Indent Less",J="westorelggman/htmlarea/insert-horizontal-rule.png",K="Format Underline",P="westorelggman/htmlarea/format-list-unordered.png",Q="scroll";
qx.Class.define(bH,{extend:qx.ui.container.Composite,construct:function(bQ,bR){elggmanHtmlArea=this;
qx.ui.container.Composite.call(this,new qx.ui.layout.VBox(0));
var bS=new qx.ui.decoration.Single(1,bx,n);
bS.setWidthTop(0);
this.__zF=new qx.ui.embed.HtmlArea(A,null,bK);
this.__zF.set({width:bQ,height:bR,decorator:bS,defaultFontSize:2});
var toolbar=this.__zT();
this.add(toolbar);
this.add(this.__zF);
this.__zG=new qx.ui.control.ColorPopup();
this.__zG.exclude();
var self=this;
this.__zG.addListener(bb,function(){var bT=this.getUserData(bu);
var bU=this.getValue();

if(bT==bp){self.__zF.setTextColor(bU);
}else if(bT==bs){self.__zF.setTextBackgroundColor(bU);
}});
this.__zG._createColorSelector=function(){if(this.__zI){return;
}var bV=new qx.ui.window.Window(this.tr(bI));
this.__zH=bV;
bV.setLayout(new qx.ui.layout.VBox(16));
bV.setResizable(false);
bV.setZIndex(99999);
bV.setModal(true);
var bY=elggmanHtmlArea.getContainerLocation(Q);
bV.moveTo(bY.left,bY.top-120);
this.__zI=new qx.ui.control.ColorSelector;
bV.add(this.__zI);
var bW=new qx.ui.container.Composite(new qx.ui.layout.HBox(8,bn));
bV.add(bW);
var ca=this._createChildControl(V);
var bX=this._createChildControl(bM);
bW.add(ca);
bW.add(bX);
};
},events:{"minmax":bf},members:{__zF:null,__zG:null,__zJ:function(e){elggmanHtmlArea.__zG.placeToWidget(e.getTarget());
elggmanHtmlArea.__zG.setUserData(bu,bp);
elggmanHtmlArea.__zG.show();
},__zK:function(e){elggmanHtmlArea.__zG.placeToWidget(e.getTarget());
elggmanHtmlArea.__zG.setUserData(bu,bs);
elggmanHtmlArea.__zG.show();
},__zL:function(e){var cb={src:qx.util.ResourceManager.getInstance().toUri(bD),border:0,title:bo,alt:bo};
this.insertImage(cb);
},__zM:function(e){elggmanHtmlArea.fireEvent(bJ);
},__zN:function(e){var cc=w+q+br+bw+B+bm+br+bk+y+bm+bd+bP;
this.insertHtml(cc);
},__zO:function(e){var ce=new qx.ui.window.Window(bN);
ce.setLayout(new qx.ui.layout.VBox(20));
ce.set({width:400,showMaximize:false,showMinimize:false});
var ci=new qx.ui.form.TextField(X);
ce.add(ci);
var cg=new qx.ui.layout.HBox(10);
cg.setAlignX(bn);
var ch=new qx.ui.container.Composite(cg);
var cd=new qx.ui.form.Button(bB);
cd.setWidth(60);
cd.addListener(bt,function(e){this.insertHyperLink(ci.getValue());
ce.close();
},this);
ch.add(cd);
var cf=new qx.ui.form.Button(bl);
cf.setWidth(60);
cf.addListener(bt,function(e){ce.close();
},this);
ch.add(cf);
ce.add(ch);
ce.center();
ce.open();
this.saveRange();
},__zP:function(e){var cj=window.prompt(bj,bv);
this.insertHtml(cj);
},__zQ:function(){var cl=new qx.ui.form.SelectBox;
cl.set({toolTipText:M,focusable:false,keepFocus:true,width:120,height:16,margin:[4,0]});
cl.add(new qx.ui.form.ListItem(bv));
var cm=[bz,H,p,N,g,D,F,Y,h,by,o];
var ck;

for(var i=0,j=cm.length;i<j;i++){ck=new qx.ui.form.ListItem(cm[i]);
ck.set({focusable:false,keepFocus:true,font:qx.bom.Font.fromString(bO+cm[i])});
cl.add(ck);
}cl.addListener(bq,function(e){var cn=e.getData()[0].getLabel();

if(cn!=bv){this.setFontFamily(cn);
}},this.__zF);
return cl;
},__zR:function(){var cp=new qx.ui.form.SelectBox;
cp.set({toolTipText:W,focusable:false,keepFocus:true,width:50,height:16,margin:[4,0]});
cp.add(new qx.ui.form.ListItem(bv));
var co;

for(var i=1;i<=7;i++){co=new qx.ui.form.ListItem(i+bv);
co.set({focusable:false,keepFocus:true});
cp.add(co);
}cp.addListener(bq,function(e){var cq=e.getData()[0].getLabel();

if(cq!=bv){this.setFontSize(cq);
}},this.__zF);
return cp;
},__zS:function(){return [{bold:{text:l,image:x,action:this.__zF.setBold},italic:{text:R,image:L,action:this.__zF.setItalic},underline:{text:K,image:bC,action:this.__zF.setUnderline},removeFormat:{text:bL,image:f,action:this.__zF.removeFormat}},{alignLeft:{text:u,image:z,action:this.__zF.setJustifyLeft},alignCenter:{text:s,image:bE,action:this.__zF.setJustifyCenter},alignRight:{text:S,image:E,action:this.__zF.setJustifyRight},alignJustify:{text:bF,image:O,action:this.__zF.setJustifyFull}},{fontFamily:{custom:this.__zQ},fontSize:{custom:this.__zR},fontColor:{text:a,image:G,action:this.__zJ},textBackgroundColor:{text:bi,image:m,action:this.__zK}},{indent:{text:U,image:ba,action:this.__zF.insertIndent},outdent:{text:I,image:v,action:this.__zF.insertOutdent}},{insertTable:{text:b,image:bA,action:this.__zN},insertHR:{text:bh,image:J,action:this.__zF.insertHorizontalRuler}},{ol:{text:C,image:t,action:this.__zF.insertOrderedList},ul:{text:be,image:P,action:this.__zF.insertUnorderedList}},{undo:{text:bc,image:d,action:this.__zF.undo},redo:{text:k,image:r,action:this.__zF.redo}},{insertImage:{text:T,image:c,action:this.__zM}}];
},__zT:function(){var toolbar=new qx.ui.toolbar.ToolBar();
toolbar.setDecorator(bG);
var cr;
var cs=this.__zS();

for(var i=0,j=cs.length;i<j;i++){var ct=new qx.ui.toolbar.Part;
toolbar.add(ct);

for(var cu in cs[i]){var cv=cs[i][cu];

if(cv.custom){cr=cv.custom.call(this);
}else{cr=new qx.ui.toolbar.Button(null,cv.image);
cr.set({focusable:false,keepFocus:true,center:true,toolTipText:cv.text?cv.text:bv});
cr.addListener(bt,cv.action,this.__zF);
}ct.add(cr);
}}return toolbar;
},getHtml:function(){return this.__zF.getComputedValue();
},getHtmlArea:function(){return this.__zF;
},setHtml:function(cw){this.__zF.setValue(cw);

if(this.__zF.getValue()!=cw){this.__zF.addListenerOnce(bg,function(){this.__zF.setValue(cw);
},this);
}}}});
})();
(function(){var l="excluded",k="execute",j="visible",h='name',g='',f="westorelggman/mail.png",d="<strong>",c="westorelggman/dialog-cancel.png",b="pushMessage",a="westorelggman/indicator_waitanim.gif",z="westorelggman.Email",y="westorelggman/mail32.png",x='EMAIL',w="</strong>.<br>",v="westorelggman/dialog-no.png",u="minmax",t="resize",s='subject',r='body',q="westorelggman/document-save.png",o='gray',p=', ',m="saveAndGetDrafts",n="changeValue";
qx.Class.define(z,{extend:qx.ui.window.Window,construct:function(){qx.ui.window.Window.call(this);
this.set({modal:true,showMinimize:false,allowMinimize:false,showMaximize:false,allowMaximize:false});
var O=this;
var G=750;
var F=this.__Ae;
this.setLayout(new qx.ui.layout.VBox(10));
this.addListener(t,this.center,this);
var i=new qx.ui.basic.Image(y,32,32);
this.__zU=new qx.ui.basic.Label().set({value:d+ElggMan_email_label+w+ElggMan_email_label_descr,rich:true});
var L=this.__zV=new qx.ui.container.Composite(new qx.ui.layout.HBox(20));
L.add(i);
L.add(this.__zU);
this.add(L);
this.__zW=new qx.ui.container.Scroll().set({width:G,height:30});
this.__zX=new qx.ui.basic.Label().set({rich:true,wrap:true,width:G,textColor:o});
this.__zW.add(this.__zX);
this.add(this.__zW);
var J=this.__zY=new qx.ui.container.Composite(new qx.ui.layout.HBox(5));
var E=new qx.ui.basic.Label(ElggMan_email_label_subject);
E.setWidth(50);
J.add(E);
this.__Aa=new qx.ui.form.TextField();
this.__Aa.setWidth(G);
J.add(this.__Aa);
this.add(J);
this.__Ab=new westorelggman.HtmlArea(G,F);
this.__Ab.addListener(u,this.__Af,this);
this.add(this.__Ab);
var P=new qx.ui.form.Button(ElggMan_email_label,f);
var N=new qx.ui.form.Button(ElggMan_cancel,c);
var D=new qx.ui.form.ComboBox();
var C=new qx.ui.form.ListItem(ElggMan_email_newdraft);
D.add(C);
elggmanMainContainer.rpc.callAsync(function(S,T,U){if(T!=null){elggmanMainContainer.alert("Async("+U+") exception: "+T);
}else{var V=S.length;

if(V){for(i=0;i<V;i++){C=new qx.ui.form.ListItem(S[i][h]);
D.add(C);
subjects[S[i][h]]=S[i][s];
drafts[S[i][h]]=S[i][r];
}}}},m,null);
D.setValue(D.getChildrenContainer().getSelectables()[0].getLabel());
var A=new qx.ui.form.Button(ElggMan_email_save_as,q);
var R=new qx.ui.form.Button(g,v);
var B=this.__Ac=new qx.ui.groupbox.GroupBox(ElggMan_email_label);
B.setLayout(new qx.ui.layout.HBox(5));
var I=new qx.ui.container.Composite(new qx.ui.layout.HBox(5));
I.add(P);
I.add(N);
B.add(I);
var K=new qx.ui.groupbox.GroupBox(ElggMan_email_draft);
K.setLayout(new qx.ui.layout.HBox(5));
var H=new qx.ui.container.Composite(new qx.ui.layout.HBox(3));
H.add(D);
H.add(A);
H.add(R);
K.add(H);
var Q=new qx.ui.container.Composite(new qx.ui.layout.HBox(10));
Q.add(B);
var M=new qx.ui.basic.Label().set({value:ElggMan_email_help,rich:true,width:G});
this.add(Q);
this.add(M);
P.addListener(k,function(e){P.setEnabled(false);
P.setIcon(a);
elggmanMainContainer.rpc.callAsync(function(W,X,Y){if(X!=null){elggmanMainContainer.alert("Async("+Y+") exception: "+X);
}else{if(W.err)elggmanMainContainer.alert(W.err);
else if(W.txt)elggmanMainContainer.alert(W.txt);
}O.close();
P.setEnabled(true);
P.setIcon(f);
},b,x,this.getRecipientIds(),this.__Ab.getHtml(),this.__Aa.getValue());
},this);
N.addListener(k,function(e){this.close();
},this);
D.addListener(n,function(e){},this);
A.addListener(k,function(e){},this);
R.addListener(k,function(e){},this);
},members:{__Ad:false,__Ae:150,__Af:function(){if(!this.__Ad){this.__zV.setVisibility(l);
this.__zY.setVisibility(l);
this.__zW.setVisibility(l);
this.__Ac.setVisibility(l);
this.__Ab.getHtmlArea().setHeight(this.getInnerSize().height-110);
this.__Ad=true;
}else{this.__Ab.getHtmlArea().setHeight(this.__Ae);
this.__zY.setVisibility(j);
this.__zV.setVisibility(j);
this.__zW.setVisibility(j);
this.__Ac.setVisibility(j);
this.__Ad=false;
}},setRecipients:function(ba){this.__Ag=ba;
var bc=this.__Ag.length;
var bb=g;

for(var i=0;i<bc;i++){bb=bb+this.__Ag[i][1];

if(this.__Ag[(i+1)]&&this.__Ag[(i+1)][1])bb=bb+p;
}this.__zX.setValue(bb);
},getRecipientIds:function(){var be=this.__Ag.length;
var bd=[];

for(var i=0;i<be;i++){bd.push(this.__Ag[i][0]);
}return (bd);
},setHtmlContent:function(bf){this.__Ab.setHtml(bf);
},setSubject:function(bg){this.__Aa.setValue(bg);
}}});
})();
(function(){var bv="engine.name",bu="inserthtml",bt="",bs="__Ay",br="mshtml",bq=';',bp="p",bo="font-family",bn="text-align",bm="id",bb="InsertHtml",ba="__paragraph__",Y="qx.bom.htmlarea.HtmlArea.debug",X="webkit",W="qx.debug",V="__Az",U="_moz",T="formatBlock",S="insertParagraph",R="li",bC="__AQ",bD="|top|bottom|center|left|right|right top|left top|left bottom|right bottom|",bA="__placeholder__",bB='font-family:',by="<p style='",bz="outdent",bw="InsertImage",bx="__resetHtml",bE="FontName",bF="__AP",bf="qx.bom.htmlarea.manager.Command",be="'><br class='webkit-block-placeholder' />",bh='"',bg="__AW",bj="type",bi="CreateLink",bl=":",bk="__AX",bd="__AV",bc="__AO",a='"></span>',b="Italic",c=";",d="InsertUnorderedList",f="body",g='text-align:',h="Bold",m="ForeColor",n='" ',o="repeat repeat-x repeat-y no-repeat",bJ='</p>',bI="__AE",bH="__AU",bG="__AN",bN="Control",bM="IMG",bL='<p id="',bK="StrikeThrough",bP="__Au",bO="__getHtml",D='>',E="Indent",B=':',C="br",H="__AD",I="Copy",F="Paste",G="__AM",z="RemoveFormat",A="JustifyRight",w="FontSize",v='',y='style="',x="JustifyCenter",s="_moz_dirty",r="__AS",u="JustifyLeft",t="Underline",q="SelectAll",p="Cut",N='<span id="',O="__AB",P="JustifyFull",Q="__AR",J="Outdent",K="indent",L="selectall",M="InsertOrderedList";
qx.Class.define(bf,{extend:qx.core.Object,construct:function(bQ){qx.core.Object.call(this);
this.__Ah=bQ;
this.__Ai=null;
this._commands=null;
this.__Ap();
this.__Aj={"Bold":true,"Italic":true,"Underline":true,"StrikeThrough":true};
this.__Ak=[10,12,16,18,24,32,48];
this.__Al=0;
},statics:{__Am:bD,__An:o},members:{__Ai:null,__Ah:null,__Ao:false,__Aj:null,__Ak:null,__Al:null,setContentDocument:function(bR){this.__Ai=bR;
},getCommandObject:function(bS){if(this._commands[bS]){return this._commands[bS];
}else{return null;
}},__Ap:function(){this._commands={bold:{useBuiltin:false,identifier:h,method:bH},italic:{useBuiltin:false,identifier:b,method:bd},underline:{useBuiltin:false,identifier:t,method:bg},strikethrough:{useBuiltin:false,identifier:bK,method:bk},fontfamily:{useBuiltin:true,identifier:bE,method:null},fontsize:{useBuiltin:false,identifier:w,method:G},textcolor:{useBuiltin:true,identifier:m,method:null},textbackgroundcolor:{useBuiltin:false,identifier:null,method:bG},backgroundcolor:{useBuiltin:false,identifier:null,method:bc},backgroundimage:{useBuiltin:false,identifier:null,method:bF},justifyleft:{useBuiltin:false,identifier:u,method:bs},justifyright:{useBuiltin:false,identifier:A,method:bs},justifycenter:{useBuiltin:false,identifier:x,method:bs},justifyfull:{useBuiltin:false,identifier:P,method:bs},indent:{useBuiltin:true,identifier:E,method:null},outdent:{useBuiltin:true,identifier:J,method:null},copy:{useBuiltin:true,identifier:I,method:null},cut:{useBuiltin:true,identifier:p,method:null},paste:{useBuiltin:true,identifier:F,method:null},insertorderedlist:{useBuiltin:false,identifier:M,method:V},insertunorderedlist:{useBuiltin:false,identifier:d,method:V},inserthorizontalrule:{useBuiltin:false,identifier:bb,method:bI},insertimage:{useBuiltin:false,identifier:bw,method:O},inserthyperlink:{useBuiltin:false,identifier:bi,method:H},selectall:{useBuiltin:false,identifier:q,method:bC},selectedtext:{useBuiltin:false,identifier:null,method:Q},selectedhtml:{useBuiltin:false,identifier:null,method:r},inserthtml:{useBuiltin:false,identifier:bb,method:bP},resethtml:{useBuiltin:false,identifier:null,method:bx},gethtml:{useBuiltin:false,identifier:null,method:bO},removeformat:{useBuiltin:true,identifier:z,method:null}};
},execute:function(bT,bU){if(!this.__Ah.isReady()){this.error("editor not ready! '"+bT+"':'"+bU+"'");
return false;
}bT=bT.toLowerCase();
bU=bU!=null?bU:null;
if(this._commands[bT]){var bV;
var bW=this._commands[bT];
if(!((qx.core.Environment.get(bv)==X)&&(bT==K||bT==bz))){if(this.__Aq()){this.__Ar();
}}if(bW.useBuiltin){bV=this.__As(bW.identifier,false,bU);
}else{if(bW.method!=null&&this[bW.method]){bV=this[bW.method].call(this,bU,bW);
}else{this.error("The method '"+bW.method+"' you calling to execute the command '"+bT+"' is not available!");
}}this.__Ah.resetSavedRange();
return bV;
}else{this.error("Command "+bT+" is currently not supported!");
}},__Aq:function(){var Node=qx.dom.Node;
var bX=this.__Ah.getFocusNode();
var cb=false;
var bY=false;

if(bX){if(Node.isText(bX)){var ca=qx.dom.Hierarchy.getAncestors(bX);

for(var i=0,j=ca.length;i<j;i++){if(Node.isNodeName(ca[i],bp)||qx.bom.htmlarea.HtmlArea.isHeadlineNode(ca[i])){cb=true;
break;
}}}else if(Node.isNodeName(bX,f)){bY=true;
}}return bY||!cb;
},__Ar:function(){this.__As(T,false,bp);
},__As:function(cc,cd,ce){try{var ch=this.__Ai;
var cf=false;
var cg=this.__Ah.getRange();
this.__Ai.body.focus();
if((qx.core.Environment.get(bv)==br)){if(cc!=L){cg.select();
if(((cg.text)&&(cg.text.length>0))||((cg.length==1)&&(cg.item(0))&&(cg.item(0).tagName==bM))){ch=cg;
}else{ch=this.__Ai;
}}if(((qx.core.Environment.get(bv)==br))&&(this.__Aj[cc])){if(cg.text==bt){cf=true;
}}}var ci=ch.execCommand(cc,cd,ce);

if(cf&&cg.text!=bt){cg.collapse();
}
if((qx.core.Environment.get(W))&&qx.core.Environment.get(Y)){this.debug("execCommand "+cc+" with value "+ce+" succeded");
}this.__Ao=false;
}catch(cj){if((qx.core.Environment.get(W))&&qx.core.Environment.get(Y)){this.debug("execCommand "+cc+" with value "+ce+" failed");
}return false;
}return ci;
},__At:qx.core.Environment.select(bv,{"mshtml":function(){var cl=this.__Ah;
var ck=cl.getSavedRange()!=null?cl.getSavedRange():cl.getRange();
return ck;
},"default":function(){return this.__Ah.getRange();
}}),__Au:qx.core.Environment.select(bv,{"mshtml":function(cm,cn){var cq;
if(cm==qx.bom.htmlarea.HtmlArea.simpleLinebreak){return this.__Ax();
}else{this.__Ai.body.focus();
var cp=this.__Ah.getSelection();
var co=this.__At();
if(co&&cp&&cp.type!=bN){try{co.pasteHTML(cm);
co.collapse(false);
co.select();
cq=true;
}catch(e){}}else{cq=false;
}this.__Ah.resetSavedRange();
return cq;
}},"default":function(cr,cs){this.__Ai.body.focus();
return this.__Ai.execCommand(cs.identifier,false,cr);
}}),insertParagraphOnLinebreak:qx.core.Environment.select(bv,{"gecko":function(){var cA=this.__AH();
var cE=this.__Av(cA);
var cw=this.__AF(cA);
var cB=bA+Date.parse(new Date());
var cC=ba+Date.parse(new Date());
var cu=v;
var cy=N+cB+a;
cu+=cy;
cu+=bL+cC+n+cE+D;
cu+=cw+bJ;
this.__Ah.getCommandManager().addUndoStep(bu,S,this.getCommandObject(bu));
this.execute(bu,cu);
this.__Aw();
qx.bom.element.Attribute.reset(this.__Ai.getElementById(cB),bm);
var cz=this.__Ai.getElementById(cC);

if(cz.previousSibling.innerHTML==cy){var ct=this.__AG();
var cx=this.__Ai.createElement(C);
var cv=this.__Ai.createAttribute(s);
cv.nodeValue=bt;
cx.setAttributeNode(cv);
var cD=this.__Ai.createAttribute(bj);
cD.nodeValue=U;
cx.setAttributeNode(cD);
cz.previousSibling.appendChild(ct);
cz.previousSibling.appendChild(cx);
}qx.bom.element.Attribute.reset(cz,bm);
return true;
},"webkit":function(){var cF=this.getCurrentStyles();
var cG=bt;
var cI={"background-color":true,"text-align":true};
for(var cH in cF){if(cI[cH]){cG+=cH+bl+cF[cH]+c;
}}this.__Ah.insertHtml(by+cG+be);
},"default":qx.lang.Function.empty}),__Av:qx.core.Environment.select(bv,{"gecko":function(cJ){var cO=y;
var cN=cJ.child;
if(cN[bn]){cO+=g+cN[bn]+bq;
delete cJ.child[bn];
}if(cN[bo]){cO+=bB+cN[bo]+bq;
delete cJ.child[bo];
}var cM={"padding-top":true,"padding-bottom":true,"padding-left":true,"padding-right":true};
var cK={"margin-top":true,"margin-bottom":true,"margin-left":true,"margin-right":true};

for(var cL in cN){if(cM[cL]||cK[cL]){cO+=cL+B+cN[cL]+bq;
delete cJ.child[cL];
}}cO+=bh;
return cO;
},"default":function(){return bt;
}}),__Aw:qx.core.Environment.select(bv,{"gecko":function(){var cW=this.__Ah.getSelection();

if(!cW||!cW.focusNode){return;
}var cP=cW.focusNode;
var cU=cW.focusNode;

while(!qx.dom.Node.isNodeName(cU,bp)){cU=cU.parentNode;
}var cT=cU.previousSibling.id;
var cX=cU.nextSibling?cU.nextSibling.id:null;

if(qx.lang.String.startsWith(cT,ba)&&cT==cX){var cV=cU.nextSibling;
var cR=this.__Ah.getRange();
cR.selectNode(cV);
cW.addRange(cR);
var cQ=qx.bom.htmlarea.HtmlArea.EMPTY_DIV;
this.__Ah.getCommandManager().addUndoStep(bu,cQ,this.getCommandObject(bu));
this.execute(bu,cQ);
var cS=this.__Ah.getRange();

if(cP){while(cP&&cP.firstChild&&qx.dom.Node.isElement(cP.firstChild)){cP=cP.firstChild;
}}cS.selectNode(cP);
cW.addRange(cS);
cS.collapse(true);
}},"default":qx.lang.Function.empty}),__Ax:qx.core.Environment.select(bv,{"mshtml":function(){var cY=this.__Ah.getRange();
if(cY&&!qx.dom.Node.isNodeName(cY.parentElement(),R)){cY.pasteHTML(qx.bom.htmlarea.HtmlArea.simpleLinebreak);
cY.collapse(false);
cY.select();
return true;
}return false;
},"default":function(){return false;
}}),__Ay:function(da,db){var dc=(qx.core.Environment.get(bv)==br)?this.__Ah.getRange():this.__Ai;
return dc.execCommand(db.identifier,false,da);
},__Az:function(dd,de){if((qx.core.Environment.get(bv)==br)){var df=this.__Ah.getFocusNode();
this.__AA(df);
}this.__Ai.body.focus();
var dg=this.__Ai.execCommand(de.identifier,false,dd);

if((qx.core.Environment.get(bv)==X)){var df=this.__Ah.getFocusNode();
this.__AA(df.parentNode);
}return dg;
},__AA:function(dh){var di=[];
var parent=dh.parentNode;

while(qx.dom.Node.isNodeName(parent,"blockquote")){di.push(parent);
parent=parent.parentNode;
}if(di.length>0){parent.appendChild(dh);
parent.removeChild(di[di.length-1]);
}},__AB:qx.core.Environment.select("engine.name",{"gecko":function(dj,dk){if(dj.src){this.__Ai.execCommand(dk.identifier,false,dj.src);
delete dj.src;
var dy=this.__Ah.getSelection();
if(dy){var dx=dy.anchorNode;
var ds=dy.anchorOffset;
var dp=dx.childNodes[ds-1];
var dv;

for(var dr in dj){dv=this.__Ai.createAttribute(dr);
dv.nodeValue=dj[dr];
dp.setAttributeNode(dv);
}var dq={"font":true,"span":true};
var dm=null;
var du=true;
if(qx.dom.Node.isElement(dp.previousSibling)&&dq[qx.dom.Node.getName(dp.previousSibling)]){dm=dp.previousSibling;
}else if(dq[qx.dom.Node.getName(dp.parentNode)]){dm=dp.parentNode;
du=false;
}var dn=this.__Ai.createDocumentFragment();
var dz;

if(du&&dm!=null){var dq=this.__AC(dm);
dn.appendChild(dq.root);
dz=dq.inline;
}else{dz=this.__Ai.createElement("span");
dn.appendChild(dz);
}var dw=this.__Ai.createTextNode("");
dz.appendChild(dw);
var dt=dp.parentNode;
if(dp==dt.lastChild){dt.appendChild(dn);
}else{dt.insertBefore(dn,dp.nextSibling);
}var dl=this.__Ah.getRange();
dl.selectNodeContents(dz);
}return true;
}else{return false;
}},"mshtml":function(dA,dB){var dF=false;
var dG="<img ";

for(var dC in dA){dG+=dC+"='"+dA[dC]+"' ";
}dG+="/>";
var dD=this.__Ah.getSelection();
var dE=this.__At();
if(dD&&dD.type!="Control"){try{dE.select();
dE.pasteHTML(dG);
dF=true;
}catch(e){}}this.__Ah.resetSavedRange();
return dF;
},"default":function(dH,dI){if(dH.src){var dK="<img ";

for(var dJ in dH){dK+=dJ+"='"+dH[dJ]+"' ";
}dK+="/>";
return this.__Ai.execCommand("InsertHtml",false,dK);
}else{return false;
}}}),__AC:function(dL){while(dL.firstChild&&dL.firstChild.nodeType==1){dL=dL.firstChild;
}var dP=this.__AH(dL);
var dT,dN,dR;
var dM="";
var parent=null;
var dS=null;
var dQ=dP.child;

while(dQ){dS=this.__Ai.createElement(dQ["legacy-font-size"]?"font":"span");
dN=this.__Ai.createAttribute("style");
dS.setAttributeNode(dN);
for(var dO in dQ){if(dO!="child"&&dO!="legacy-font-size"){dM+=dO+":"+dQ[dO]+";";
}else if(dO=="legacy-font-size"){dR=this.__Ai.createAttribute("size");
dR.nodeValue=dQ[dO];
dS.setAttributeNode(dR);
}}dN.nodeValue=dM;

if(parent!=null){parent.appendChild(dS);
}else{dT=dS;
}parent=dS;
dQ=dQ.child;
dM="";
}return {root:dT,inline:dS};
},__AD:qx.core.Environment.select("engine.name",{"gecko|opera":function(dU,dV){var ec=this.__Ah.getSelection();
var dY=this.__Ah.getRange();
if(ec.isCollapsed){var dX="qx_link"+(++this.__Al);
var ed=this.__Ai.createElement("a");
var ea=this.__Ai.createAttribute("href");
var dW=this.__Ai.createAttribute("id");
var eb=this.__Ai.createTextNode(dU);
dW.nodeValue=dX;
ed.setAttributeNode(dW);
ea.nodeValue=dU;
ed.setAttributeNode(ea);
ed.appendChild(eb);
dY.insertNode(ed);
dY.selectNode(ed);
ec.collapseToEnd();
return true;
}else{return this.__Ai.execCommand(dV.identifier,false,dU);
}},"mshtml":function(ee,ef){try{var eh;
var eg=this.__At();
var ei=this.__Ah;
var eg=ei.getSavedRange()!=null?ei.getSavedRange():ei.getRange();

if(eg!=null&&eg.text!=""){eh=eg.execCommand(ef.identifier,false,ee);
}else{eh=this.__Au(' <a href="'+ee+'">'+ee+'</a> ',ef);
}this.__Ah.resetSavedRange();
return eh;
}catch(e){return false;
}},"default":function(ej,ek){return this.__Ai.execCommand(ek.identifier,false,ej);
}}),__AE:function(el,em){var en="<hr />";
if((qx.core.Environment.get("engine.name")=="gecko")){en+=this.__AF();
}return this.__Au(en,em);
},__AF:function(eo){var es="";
var er='<span style="';
var eq=[];
var ev=typeof eo!=="undefined"?eo:this.__AH();
var et=ev.child;
var eu=false;
if(qx.lang.Object.isEmpty(et)){return "";
}
while(et){eu=et["legacy-font-size"]!=null;
es+=eu?'<font style="':er;

for(var ep in et){es+=(ep!="child"&&ep!="legacy-font-size")?ep+':'+et[ep]+';':"";
}es+=eu?'" size="'+et["legacy-font-size"]+'">':'">';
eq.unshift(eu?"</font>":"</span>");
et=et.child;
}if(eq.length==1&&eq[0]=="</font>"){es+="<span></span>";
}for(var i=0,j=eq.length;i<j;i++){es+=eq[i];
}return es;
},__AG:function(){var ey=this.__Ai.createDocumentFragment();
var eD=this.__AH();
var parent=ey;
var eB=eD.child;
var ez;
var eC=false;

while(eB){eC=eB["legacy-font-size"]!=null;
ez=this.__Ai.createElement(eC?"font":"span");
parent.appendChild(ez);
for(var ew in eB){if(ew!="child"&&ew!="legacy-font-size"){qx.bom.element.Style.set(ez,ew,eB[ew]);
}}
if(eC){var eA=this.__Ai.createAttribute("size");
eA.nodeValue=eB["legacy-font-size"];
ez.setAttributeNode(eA);
}parent=ez;
eB=eB.child;
}return ey;
},__AH:function(eE){var eG={};
var eH=null;
var eI=this.getCurrentStyles(eE);
eH=eG.child={};

for(var eF in eI){if(eF!="text-decoration"){eH[eF]=eI[eF];
}}if(eI["text-decoration"]){var eJ=eI["text-decoration"];
for(var i=0,j=eJ.length;i<j;i++){if(eH==null){eH=eG.child={};
}else{eH=eH.child={};
}eH['color']=eJ[i]['color'];
eH['text-decoration']=eJ[i]['text-decoration'];
}}if(eI['color']&&eI['text-decoration']){eH=eH.child={};
eH['color']=eI['color'];
}return eG;
},getCurrentStyles:function(eK){if(eK==null){var eM=this.__Ah.getSelection();

if(!eM||eM.focusNode==null){return {};
}eK=(eM.focusNode.nodeType==3)?eM.focusNode.parentNode:eM.focusNode;
}var eN=qx.dom.Hierarchy.getAncestors(eK);
var eP=qx.lang.Array.insertBefore(eN,eK,eN[0]);
var eL=this.__AI(eP);
var eO=this.__AJ(eL,eP);
return eO;
},__AI:function(eQ){var eT={};
var eR,eS;

for(var i=0,j=eQ.length;i<j;i++){eS=eQ[i];

for(var k=0,l=eS.style.length;k<l;k++){eR=eS.style[k];

if(eR.length>0&&typeof eT[eR]==="undefined"){eT[eR]=eS.style.getPropertyValue(eR);
}}if(eS.tagName.toUpperCase()=="FONT"&&eS.size&&eT["legacy-font-size"]===undefined){eT["legacy-font-size"]=eS.size;
}}if(eT["legacy-font-size"]&&eT["font-size"]){delete eT["font-size"];
}return eT;
},__AJ:function(eU,eV){var fb=eV[0];
var eY=this.__Ah.getContentWindow().getComputedStyle(fb,null);
var eW;
var fa={};

for(var eX in eU){if(eX!="legacy-font-size"){eW=eY.getPropertyValue(eX);
}else{eW=eU[eX];
}if(eX=="background-color"&&eW=="transparent"){fa[eX]=this.__AL(eV);
}else if(eX=="text-decoration"){fa[eX]=this.__AK(eV);
}else{fa[eX]=eW;
}}return fa;
},__AK:function(fc){var ff,fh,fd;
var fg=[];
var fe=this.__Ah.getContentWindow();

for(var i=0,j=fc.length;i<j;i++){fd=fe.getComputedStyle(fc[i],null);
ff=fd.getPropertyValue("text-decoration");
fh=fd.getPropertyValue("color");
if(ff!="none"){fg.push({'text-decoration':ff,'color':fh});
}}return fg;
},__AL:function(fi){var fk,fj,fl;

for(var i=0;i<fi.length;i++){fk=fi[i];
fj=this.__Ah.getContentWindow().getComputedStyle(fk,null);
fl=fj.getPropertyValue("background-color");
if(fl!="transparent"){return fl;
}}},__AM:function(fm,fn){var fz=this.__Ah.getSelection();
var fu=((qx.core.Environment.get("engine.name")=="mshtml"))?this.__Ah.getRange():fu=fz.getRangeAt(0);
var fv=[];
var fy;
var ft=["OL","UL"];
var fo,i,j,fw;
fw=((qx.core.Environment.get("engine.name")=="mshtml"))?fu.parentElement():fu.commonAncestorContainer;
if(fw.tagName=="BODY"){for(var i=0;i<ft.length;i++){fo=fw.getElementsByTagName(ft[i]);

for(var j=0;j<fo.length;j++){if(fo[j]){fv.push(fo[j]);
}}}}else if(qx.lang.Array.contains(ft,fw.tagName)){fv.push(fw);
}
if(fv.length>0){for(var i=0;i<fv.length;i++){var fq=fv[i];
fy=((qx.core.Environment.get("engine.name")=="mshtml"))?
((fq==fw)||(fw.tagName=="BODY")):
fz.containsNode(fq,false);
for(j=0;j<fq.childNodes.length;j++){var fs=fq.childNodes[j];
if(fy||
(fz.focusNode.nodeValue&&qx.dom.Hierarchy.contains(fs,fz.focusNode)&&(fz.focusOffset==fz.focusNode.nodeValue.length))||
(qx.dom.Hierarchy.contains(fs,fz.anchorNode)&&(fz.anchorOffset==0))||
(fz.containsNode(fs,false))){fs.style.fontSize=(this.__Ak[fm]||fm)+"px";
}}}}else{var fr=((qx.core.Environment.get("engine.name")=="mshtml"))?fw:fz.focusNode;
var fx=qx.dom.Hierarchy.getAncestors(fr);

for(i=0;i<fx.length;i++){if(fx[i].tagName=="LI"){if((((qx.core.Environment.get("engine.name")=="gecko"))&&
((fz.anchorOffset==0)&&
(fz.focusNode.nodeValue&&(fz.focusOffset==fz.focusNode.nodeValue.length))&&
qx.dom.Hierarchy.contains(fx[i].firstChild,fz.anchorNode)&&
qx.dom.Hierarchy.contains(fx[i].lastChild,fz.focusNode)))||
(((qx.core.Environment.get("engine.name")=="mshtml"))&&(fu.htmlText==fx[i].innerHTML))){fx[i].style.fontSize=(this.__Ak[fm]||fm)+"px";
}break;
}}}if((qx.core.Environment.get("engine.name")=="mshtml")){this.__Ai.body.focus();
this.__Ah.getRange().select();
return this.__Ai.execCommand("FontSize",false,fm);
}else if((qx.core.Environment.get("engine.name")=="gecko")){var parent=fu.commonAncestorContainer;
if(parent.nodeType===1){var fp=parent.getElementsByTagName("span");

for(i=0;i<fp.length;i++){if(fp[i].style.fontSize){fp[i].style.fontSize=null;
}}}}return this.__Ai.execCommand("FontSize",false,fm);
},__AN:qx.core.Environment.select("engine.name",{"mshtml":function(fA,fB){this.__Ai.body.focus();
return this.__Ai.execCommand("BackColor",false,fA);
},"gecko|opera":function(fC,fD){this.__Ai.body.focus();
return this.__Ai.execCommand("HiliteColor",false,fC);
},"webkit":function(fE,fF){var fG=this.__Ah.getSelection();
var fH=this.__Ah.getRange();
if(!fG||!fG.isCollapsed){this.__Ai.body.focus();
this.__Ai.execCommand("BackColor",false,fE);
if(fG){fG.collapseToEnd();
}return true;
}else{var fJ=fG.anchorOffset;
var fK=fG.anchorOffset;
var fH=fG.getRangeAt(0);
var fI=fG.anchorNode;
while(fK>0){if(fI.nodeValue.charCodeAt(fK)==160||fI.nodeValue.charCodeAt(fK)==32){break;
}else{fK--;
}}while(fJ<fI.nodeValue.length){if(fI.nodeValue.charCodeAt(fJ)==160||fI.nodeValue.charCodeAt(fJ)==32){break;
}else{fJ++;
}}fH.setStart(fG.anchorNode,fG.anchorNode.nodeValue.charAt(fK)==" "?fK+1:fK);
fH.setEnd(fG.anchorNode,fJ);
fG.addRange(fH);
this.__Ai.body.focus();
this.__Ai.execCommand("BackColor",false,fE);
fG.collapseToEnd();
return true;
}}}),__AO:function(fL,fM){fL=fL!=null&&typeof fL=="string"?fL:"transparent";
qx.bom.element.Style.set(this.__Ai.body,"backgroundColor",fL);
return true;
},__AP:function(fN,fO){var fP,fR,fQ;
var fS=qx.bom.htmlarea.manager.Command;

if(fN==null){fP=null;
}else{fP=fN[0];
fR=fN[1];
fQ=fN[2];
}if(fP==null||typeof fP!="string"){qx.bom.element.Style.set(this.__Ai.body,"backgroundImage","");
qx.bom.element.Style.set(this.__Ai.body,"backgroundRepeat","");
qx.bom.element.Style.set(this.__Ai.body,"backgroundPosition","");
return true;
}else{if(fP.search(/^url.*\(/)==-1){fP="url("+fP+")";
}}if(fR!=null&&!qx.lang.String.contains(fS.__An,fR)){return false;
}else{fR="no-repeat";
}
if(fQ!=null){if(qx.lang.Type.isString(fQ)&&!qx.lang.String.contains(fS.__Am,'|'+fQ+'|')){return false;
}else{if(qx.lang.Type.isArray(fQ)&&fQ.length==2){fQ=fQ[0]+" "+fQ[1];
}else{return false;
}}}else{fQ="top";
}qx.bom.element.Style.set(this.__Ai.body,"backgroundImage",fP);
qx.bom.element.Style.set(this.__Ai.body,"backgroundRepeat",fR);
qx.bom.element.Style.set(this.__Ai.body,"backgroundPosition",fQ);
return true;
},__AQ:qx.core.Environment.select("engine.name",{"mshtml":function(fT,fU){var fV=this.__Ai.body.createTextRange();
fV.select();
return true;
},"default":function(fW,fX){return this.__As(fX.identifier,false,fW);
}}),__AR:function(){return this.__Ah.getSelectedText();
},__AS:function(){return this.__Ah.getSelectedHtml();
},__AT:function(fY,ga){var ge=this.__Ah.getFocusNode();

if(ge.textContent==""){var gc=qx.dom.Hierarchy.getAncestors(ge);
gc.unshift(ge);
var Node=qx.dom.Node;
var gb=qx.bom.element.Style;
var gd=gc.shift();

while(gc.length>0){if(Node.getName(gd)=="p"||Node.getName(gd)=="body"){break;
}if(gb.get(gd,fY,gb.LOCAL_MODE)==ga){gb.reset(gd,fY);
return true;
}gd=gc.shift();
}}return false;
},__AU:qx.core.Environment.select("engine.name",{"gecko":function(gf,gg){if(this.__AT("fontWeight","bold")){return true;
}else{return this.__As(gg.identifier,false,gf);
}},"default":function(gh,gi){return this.__As(gi.identifier,false,gh);
}}),__AV:qx.core.Environment.select("engine.name",{"gecko":function(gj,gk){if(this.__AT("fontStyle","italic")){return true;
}else{return this.__As(gk.identifier,false,gj);
}},"default":function(gl,gm){return this.__As(gm.identifier,false,gl);
}}),__AW:qx.core.Environment.select("engine.name",{"gecko":function(gn,go){if(this.__AT("textDecoration","underline")){return true;
}else{return this.__As(go.identifier,false,gn);
}},"webkit":function(gp,gq){var gr=this.__Ah.getContextInformation();
var gt=this.__Ah.getFocusNode();
if(gr.underline){gt.style.textDecoration="none";
}else{if(gr.strikethrough){var gu=this.__Ai.createElement("span");
qx.bom.element.Style.set(gu,"textDecoration","underline");
gt.appendChild(gu);
var gs=this.__Ah.getSelection();

if(gs){gs.extend(gu,0);

if(!gs.isCollapsed){gs.collapseToEnd();
}}}else{gt.style.textDecoration="underline";
}}return true;
},"default":function(gv,gw){return this.__As(gw.identifier,false,gv);
}}),__AX:qx.core.Environment.select("engine.name",{"gecko":function(gx,gy){if(this.__AT("textDecoration","line-through")){return true;
}else{return this.__As(gy.identifier,false,gx);
}},"webkit":function(gz,gA){var gC=this.__Ah.getFocusNode();
var gD=this.__Ai.createElement("span");
qx.bom.element.Style.set(gD,"textDecoration","line-through");
gC.appendChild(gD);
var gB=this.__Ah.getSelection();

if(gB){gB.extend(gD,0);

if(!gB.isCollapsed){gB.collapseToEnd();
}}return true;
},"default":function(gE,gF){return this.__As(gF.identifier,false,gE);
}})},destruct:function(){this.__Ai=this.__Ah=this._commands=null;
this.__Aj=this.__Ak=null;
}});
})();

});